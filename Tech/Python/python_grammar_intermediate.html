<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon-32x32.png" color="#222">
  <link rel="manifest" href="/manifest.json">
  <meta name="google-site-verification" content="vBZBS_Ucyk1uWpkEaY8rOwJx0vIi2CVILoSATSjHr-k">
  <meta name="msvalidate.01" content="0A53450D60EE95103C2117D5737EA0C7">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"coldeye2020.monster","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"right","width":200,"display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="说明  本文是在大三上学期参照廖雪峰Python教程所做笔记，后并未勘误，如有错误，请谅解 另外，本文并不是一份严谨可靠的Python教程，更多的是我学习Python&#96;中级语法设计时的一些心得和感悟">
<meta property="og:type" content="article">
<meta property="og:title" content="Python(二)Python中级语法">
<meta property="og:url" content="https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html">
<meta property="og:site_name" content="Doki Doki">
<meta property="og:description" content="说明  本文是在大三上学期参照廖雪峰Python教程所做笔记，后并未勘误，如有错误，请谅解 另外，本文并不是一份严谨可靠的Python教程，更多的是我学习Python&#96;中级语法设计时的一些心得和感悟">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-10-20T06:20:17.000Z">
<meta property="article:modified_time" content="2021-04-17T04:33:10.992Z">
<meta property="article:author" content="Coldeye">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

<title>Python(二)Python中级语法 | Doki Doki</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-193945147-1"></script>
    <script data-pjax>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-193945147-1');
      }
    </script>

  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?166a4bbbc38e0e94b738a7cc1785a0ba";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Doki Doki</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">A blog about life and tech sharing</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>




  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E8%A6%81%E7%89%A2%E8%AE%B0%E4%B8%80%E7%82%B9%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%BF%85%E9%A1%BB%E6%8C%87%E5%90%91%E4%B8%8D%E5%8F%98%E5%AF%B9%E8%B1%A1%E6%9C%80%E9%87%8D%E8%A6%81"><span class="nav-number">1.</span> <span class="nav-text">定义默认参数要牢记一点：默认参数必须指向不变对象！（最重要！！！）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0%E7%9A%84%E5%A6%99%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">可变长参数的妙用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%82%E6%95%B0"><span class="nav-number">3.</span> <span class="nav-text">关键字参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B7%E5%90%88%E4%BC%A0%E5%8F%82"><span class="nav-number">4.</span> <span class="nav-text">混合传参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BB%86%E8%8A%82"><span class="nav-number">5.</span> <span class="nav-text">字符串细节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#listtupledict%E4%B8%80%E7%B1%BB%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%8E%9F%E7%90%86-%E4%B8%8Ezip-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">6.</span> <span class="nav-text">list,tuple,dict一类的迭代原理 与zip&#96; 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%86%E7%A9%B6-list-%E7%94%9F%E6%88%90%E5%BC%8F"><span class="nav-number">7.</span> <span class="nav-text">细究 list 生成式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#generator-%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="nav-number">8.</span> <span class="nav-text">generator 创建方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="nav-number">9.</span> <span class="nav-text">高阶函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0%E9%97%AD%E5%8C%85"><span class="nav-number">10.</span> <span class="nav-text">返回函数(闭包)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%AA%E6%98%8E%E4%BA%BA%E6%89%8D%E7%9C%8B%E5%BE%97%E6%87%82%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="nav-number">11.</span> <span class="nav-text">聪明人才看得懂的例子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">12.</span> <span class="nav-text">装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%8F%E5%87%BD%E6%95%B0"><span class="nav-number">13.</span> <span class="nav-text">偏函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E5%88%9D%E6%AD%A5"><span class="nav-number">14.</span> <span class="nav-text">模块初步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%AE%80%E4%BB%8B"><span class="nav-number">14.1.</span> <span class="nav-text">模块简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85"><span class="nav-number">14.2.</span> <span class="nav-text">作用域(数据封装)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%99%E9%87%8C%E6%9C%89%E4%B8%80%E4%B8%AA%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BD%86%E4%B8%8D%E7%9F%A5%E9%81%93%E6%94%BE%E5%88%B0%E5%93%AA%E9%87%8C%E7%9A%84%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B"><span class="nav-number">14.3.</span> <span class="nav-text">这里有一个值得注意的但不知道放到哪里的实际案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81"><span class="nav-number">14.4.</span> <span class="nav-text">继承和多态</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF"><span class="nav-number">14.4.1.</span> <span class="nav-text">1 多继承</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#mro"><span class="nav-number">14.4.1.1.</span> <span class="nav-text">1 MRO</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mixin---%E6%B7%B7%E5%85%A5"><span class="nav-number">14.4.1.2.</span> <span class="nav-text">2 MIXIN - 混入</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E4%BF%A1%E6%81%AF%E5%8F%8D%E5%B0%84"><span class="nav-number">14.5.</span> <span class="nav-text">获取对象信息(反射)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="nav-number">14.6.</span> <span class="nav-text">类方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">14.7.</span> <span class="nav-text">静态方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95"><span class="nav-number">14.8.</span> <span class="nav-text">魔法方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%94%80%E6%AF%81"><span class="nav-number">14.8.1.</span> <span class="nav-text">对象的创建与销毁</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="nav-number">14.8.2.</span> <span class="nav-text">可视化对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="nav-number">14.8.3.</span> <span class="nav-text">比较运算符重载</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bool-%E5%92%8C-len-%E5%87%BD%E6%95%B0"><span class="nav-number">14.8.4.</span> <span class="nav-text">bool() 和 len() 函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#hash%E4%B8%8E%E5%8F%AFhash%E5%AF%B9%E8%B1%A1"><span class="nav-number">14.8.5.</span> <span class="nav-text">hash()与可hash对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1"><span class="nav-number">14.8.6.</span> <span class="nav-text">可调用对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8%E5%9F%BA%E4%BA%8E__call__"><span class="nav-number">14.8.7.</span> <span class="nav-text">类装饰器(基于__call__)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E5%9F%BA%E4%BA%8E__call__"><span class="nav-number">14.8.8.</span> <span class="nav-text">单例(基于__call__)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#with%E8%AF%AD%E5%8F%A5"><span class="nav-number">14.8.9.</span> <span class="nav-text">with语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0%E5%99%A8"><span class="nav-number">14.9.</span> <span class="nav-text">描述器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-number">14.10.</span> <span class="nav-text">补充</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#super%E6%96%B9%E6%B3%95"><span class="nav-number">14.10.1.</span> <span class="nav-text">super()方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B"><span class="nav-number">15.</span> <span class="nav-text">面向对象高级编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7"><span class="nav-number">15.1.</span> <span class="nav-text">动态绑定属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7%E7%9A%84%E9%99%90%E5%88%B6"><span class="nav-number">15.2.</span> <span class="nav-text">对动态绑定属性的限制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#slots__"><span class="nav-number">15.2.1.</span> <span class="nav-text">__slots__</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#property%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="nav-number">15.2.2.</span> <span class="nav-text">@property的实现与作用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io%E7%BC%96%E7%A8%8B"><span class="nav-number">16.</span> <span class="nav-text">IO编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99"><span class="nav-number">16.1.</span> <span class="nav-text">文件读写</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Coldeye"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Coldeye</p>
  <div class="site-description" itemprop="description">Finnally, you will find nothing is irreplaceable,</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/coldeye2020" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;coldeye2020" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:948283368.coldeye@gamil.com" title="E-Mail → mailto:948283368.coldeye@gamil.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://user.qzone.qq.com/948283368" title="QQ → https:&#x2F;&#x2F;user.qzone.qq.com&#x2F;948283368" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener external nofollow noreferrer" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



<!-- Insert Clustrmaps -->
<script type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=200&t=tt&d=-ZnRDnKizjAkFSMaMv_zwM1vK_yTeDc1r3Pr34sq6a8&co=2d78ad&cmo=3acc3a&cmn=ff5353&ct=ffffff"></script>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Coldeye">
      <meta itemprop="description" content="Finnally, you will find nothing is irreplaceable,">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Doki Doki">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python(二)Python中级语法
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-10-20 14:20:17" itemprop="dateCreated datePublished" datetime="2020-10-20T14:20:17+08:00">2020-10-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-04-17 12:33:10" itemprop="dateModified" datetime="2021-04-17T12:33:10+08:00">2021-04-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span id="/Tech/Python/python_grammar_intermediate.html" class="post-meta-item leancloud_visitors" data-flag-title="Python(二)Python中级语法" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>38k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>35 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <div class="note info"><p><strong>说明</strong></p>
<ul>
<li>本文是在<code>大三上学期</code>参照<code>廖雪峰Python</code>教程所做笔记，后并未勘误，如有错误，请谅解</li>
<li>另外，本文并不是一份严谨可靠的Python教程，更多的是我学习Python`中级语法设计时的一些心得和感悟</li>
</ul>
</div>
<span id="more"></span>
<h3 id="定义默认参数要牢记一点默认参数必须指向不变对象最重要">定义默认参数要牢记一点：默认参数必须指向不变对象！（最重要！！！）</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 以下就是将默认参数指向可变对象的例子</span>
<span class="token keyword">def</span> <span class="token function">appenderror</span><span class="token punctuation">(</span>L<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	L<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> L

<span class="token comment"># 我们传入参数正常使用时</span>
In<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> appenerror<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'Error'</span><span class="token punctuation">]</span>

In<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> appenerror<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'K'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'K'</span><span class="token punctuation">,</span><span class="token string">'G'</span><span class="token punctuation">,</span><span class="token string">'Error'</span><span class="token punctuation">]</span>

<span class="token comment"># 但我们使用默认参数时</span>
In<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> appenerror<span class="token punctuation">(</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'Error'</span><span class="token punctuation">]</span>
<span class="token comment"># 似乎也没毛病</span>

<span class="token comment"># 但是我们再次调用函数并使用默认参数时</span>
In<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> appenerror<span class="token punctuation">(</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">'Error'</span><span class="token punctuation">,</span><span class="token string">'Error'</span><span class="token punctuation">]</span>

<span class="token comment"># 显然得到的不是我们想要的答案</span>
<span class="token triple-quoted-string string">'''
	原因：这主要是由于Python的函数在使用默认参数时，是将默认参数先计算出来的，事实上，如果将默认参数指向可变对象，他也会创造出一个可变对象，对这个指向对象的任何操作都会影响到后续
'''</span>

<span class="token comment"># 那我们要是就是想要使用列表作为默认参数呢？</span>
<span class="token triple-quoted-string string">'''
	可采用的方法: 引入 None 或者其他任何不可变对象，
'''</span>
<span class="token keyword">def</span> <span class="token function">appenderror</span><span class="token punctuation">(</span>L<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> L <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
	L<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> L
<span class="token comment"># 当然也可以吧L换做任何字符串常量，但最好还是使用None，经过判断语句之后再把其改为想要的数据类型</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="可变长参数的妙用">可变长参数的妙用</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># A函数 未使用可变长</span>
<span class="token keyword">def</span> <span class="token function">calc</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> n <span class="token keyword">in</span> numbers<span class="token punctuation">:</span>
        <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">+</span> n <span class="token operator">*</span> n
    <span class="token keyword">return</span> <span class="token builtin">sum</span>

<span class="token comment"># A函数使用</span>
calc<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token comment"># B函数 使用可变长参数(其中可变长部分传入的元素是以tuple的方式传入的)</span>
<span class="token keyword">def</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token operator">*</span>numbers<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> n <span class="token keyword">in</span> numbers<span class="token punctuation">:</span>
        <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">+</span> n <span class="token operator">*</span> n
    <span class="token keyword">return</span> <span class="token builtin">sum</span>

<span class="token comment"># B函数使用</span>
calc<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment"># 如果我们想用可迭代对象的元素当做可变长参数传入函数B</span>
d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
calc<span class="token punctuation">(</span><span class="token operator">*</span>d<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="关键字参数">关键字参数</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	‘关键字参数’ 区别于 ‘参数名传参’ 的点在于
		1.关键字传参时是不会有提示的，即函数不会把参数名字给你，一般函数定义如下:
			def func(**kwarg):
			 	...
		  并且关键字传参时不限制数量的，你可以一直写下去，只有函数能够识别出来，如下例:
		  	func(name='小明', age=18, hometowm='湖北')
		  他是通过来生成一个dict，并根据你的输入产生键值对，来进行值的传递的
		  关键字参数的传递时是一定是要给出参数名的，这与参数名传参时可有可无不同（如果不给参数名则默认严格遵守位置传参的规则）
         2.位置参数（参数名传参）时是会有提示的，即函数不会把参数名字给你，这一点在好的文本编辑器上体现的比较明显      
     所以如果除开‘数量限制’和‘是否必须加上参数名’这两点来说的话，关键字参数真的和位置参数的（参数名传参的方式是很像了），几乎可以说是等同了
'''</span>

<span class="token comment"># 请欣赏表演:</span>
In <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	<span class="token keyword">def</span> <span class="token function">pri</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'小红'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">12</span> <span class="token punctuation">,</span><span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'name:'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	c <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'fuck'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span><span class="token string">'就这？'</span><span class="token punctuation">&#125;</span>
     	pri<span class="token punctuation">(</span><span class="token operator">**</span>c<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> name<span class="token punctuation">:</span> fuck age<span class="token punctuation">:</span> 就这？
            
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	c <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'fuck'</span><span class="token punctuation">,</span> <span class="token string">'age2'</span><span class="token punctuation">:</span><span class="token string">'sb'</span><span class="token punctuation">&#125;</span>
     	pri<span class="token punctuation">(</span><span class="token operator">**</span>c<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> name<span class="token punctuation">:</span> fuck age<span class="token punctuation">:</span> <span class="token number">12</span>            

<span class="token triple-quoted-string string">'''
	关键字参数的掠夺能力:
	容易看出的是:
		当把字典通过"**号表达式"作为一个个键值对传入后，他会先判别时候是属于未知参数，如果不都不是才会传递给关键字参数，这体现了关键字参数和未知参数通过“参数名传参的”关系。
'''</span>            

<span class="token triple-quoted-string string">'''
	让人又爱又恨的 ‘*号表达式’:
		在很多情况下，当我们调用含有关键字或者可变长参数的函数式，当我们想传入可迭代对象或者dict时，通常不是将其作为一个整体，而是想将其中的每一个元素传入函数，所以我们会使用 *表达式来拆分他们。
		1.  *可迭代对象 返回的是很多个单独的元素，但如果他们被作为不定长参数接收后，将会重新整合成一个tuple。
		2. **dict 返回的是很多个键值对，但形式不是标准的键值对，而是为‘key=value’，但如果他们作为关键字参数被接收后，将会重新整合为一个新的dict。
		3. *dict 返回一个由key组成的tuple。
		当然 ‘*号表达式’ 的作用绝不仅限于给函数传参时使用，但我绝不建议你不这样做，特别是对于新手来说。
'''</span>

<span class="token triple-quoted-string string">'''
	否定了位置传参可能的，命名关键字参数：
		可以进行位置传参也可以进行关键字传参的参数:必选参数（必须传入一个），默认参数（可以传入一个或零个）
		只能进行位置传参的参数:可变长参数（无限位置传参）
		只能进行关键字传参的参数:命名关键字参数（会有提示，也可以设置默认参数，但有限，并且如果没有设置默认则必须传入参数），关键字参数（无限关键字传参）
'''</span>
<span class="token comment"># 在下例中: name为必选参数，age为默认参数，args为可变长参数，city为默认命名关键字参数（可以不传入），job为必选命名关键字参数（必须传入），kwargs为关键字参数（无限传参）</span>
<span class="token keyword">def</span> <span class="token function">person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token string">'Beijing'</span><span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> args<span class="token punctuation">,</span> city<span class="token punctuation">,</span> job<span class="token punctuation">)</span>
<span class="token comment"># 引入命名关键字参数带来的新操作</span>
<span class="token comment"># 1.对于默认命名关键字参数: 如果你想设置一个可以选传的参数A，如果你简单的设置为默认位置参数，那么在前面通过位置传参的过程中，如果你不想给这个参数传参，则参数A之后的所有默认位置参数和“可变长参数”（特别是可变长，如果不把A用“位置传参”填上，你就永远无法把参数传到可变长那里）就都不可以进行位置传参了，除非用“位置传参”（如果你用关键字传参也不行，只能是位置传参）把这个参数A填上，这就与你想设置一个选传参数A的初心矛盾了。</span>
<span class="token comment"># 如下例，第一个函数将可选参数age定义为默认位置参数，但显然，如果不给age进行位置传参，则永远无法给可变长参数args进行传参，第二个函数将可选参数age定义为默认命名关键字参数，这次，即是不给age传参，仍可以给args传参</span>
<span class="token keyword">def</span> <span class="token function">person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token string">'beijing'</span><span class="token punctuation">,</span> job<span class="token operator">=</span><span class="token string">'guangzhou'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> args<span class="token punctuation">,</span> city<span class="token punctuation">,</span> job<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	person<span class="token punctuation">(</span><span class="token string">'xiaohong'</span><span class="token punctuation">,</span> <span class="token string">'他是个傻子'</span><span class="token punctuation">)</span>    
xiaohong 他是个傻子 <span class="token punctuation">(</span><span class="token punctuation">)</span> beijing guangzhou

<span class="token keyword">def</span> <span class="token function">person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token string">'beijing'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> job<span class="token operator">=</span><span class="token string">'guangzhou'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> args<span class="token punctuation">,</span> city<span class="token punctuation">,</span> job<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	person<span class="token punctuation">(</span><span class="token string">'xiaohong'</span><span class="token punctuation">,</span> <span class="token string">'他是个傻子'</span><span class="token punctuation">)</span>    
xiaohong <span class="token number">12</span> <span class="token punctuation">(</span><span class="token string">'他是个傻子'</span><span class="token punctuation">,</span><span class="token punctuation">)</span> beijing guangzhou
    
<span class="token comment"># 2.pass，从现在的是用来看，似乎必选命名关键字参数能做的，必选位置参数都能做的，看似好像就是简单地把其传参方式减少了</span>


<span class="token triple-quoted-string string">'''
	如果看了上面关于‘*号表达式’的表述后，你产生了一些疑问，这是正常的。
	请看下面几个例子
'''</span>

<span class="token comment"># 请欣赏表演:</span>
In <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	<span class="token keyword">def</span> <span class="token function">pri</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'小红'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">12</span> <span class="token punctuation">,</span><span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'name:'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

<span class="token comment"># 将dict作为参数名进行传参的例子</span>
In <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	c <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'fuck'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span><span class="token string">'就这？'</span><span class="token punctuation">&#125;</span>
     	pri<span class="token punctuation">(</span><span class="token operator">**</span>c<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> name<span class="token punctuation">:</span> fuck age<span class="token punctuation">:</span> 就这？

<span class="token comment"># 将可迭代对象作为参数进行位置传参的例子</span>
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'就这水平？'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
     	pri<span class="token punctuation">(</span><span class="token operator">*</span>d<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> name<span class="token punctuation">:</span> 就这水平？ age<span class="token punctuation">:</span> <span class="token number">12</span>

<span class="token comment"># 用单‘*’星号表达式拆解dict</span>
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> pri<span class="token punctuation">(</span><span class="token operator">*</span>c<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> name<span class="token punctuation">:</span> name age<span class="token punctuation">:</span> age            

<span class="token comment"># 我们来观察一下，是位置参数的掠夺能力强还是的关键字参数能力的强</span>
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>	d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'就这水平？'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
		pri<span class="token punctuation">(</span> <span class="token operator">*</span>d<span class="token punctuation">,</span><span class="token operator">**</span>c<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> TypeError<span class="token punctuation">:</span> pri<span class="token punctuation">(</span><span class="token punctuation">)</span> got multiple values <span class="token keyword">for</span> argument <span class="token string">'name'</span>
<span class="token comment"># 根据上面代码的结果，我们可以得知还是positional argument的掠夺能力更强一些，只要满足关键字，就会被位置参数夺去</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="混合传参">混合传参</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	虽说上面这些讨论可以初步看出python在函数传参时的一些规则，但是仍然十分的混乱，所以我们就直接来介绍一种极端情况下的例子，来看看python到底是如何进行参数分配的
'''</span>

<span class="token comment"># 规则1:函数的参数定义时的顺序: 必选参数、默认参数、可变参数、命名关键字参数和关键字参数。</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a ='</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">'b ='</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">'c ='</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">'args ='</span><span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token string">'kw ='</span><span class="token punctuation">,</span> kw<span class="token punctuation">)</span>
        

<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a ='</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">'b ='</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">'c ='</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">'d ='</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token string">'kw ='</span><span class="token punctuation">,</span> kw<span class="token punctuation">)</span>
        
        
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a ='</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">'b ='</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">'c ='</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">'args ='</span><span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token string">'kw ='</span><span class="token punctuation">,</span> kw<span class="token punctuation">)</span>
SyntaxError<span class="token punctuation">:</span> non<span class="token operator">-</span>default argument follows default argument        
        
<span class="token comment"># 规则2:调用函数传参时的顺序: 位置传参, 关键字(参数名)传参（不讲究顺序），例如</span>
<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">3</span> args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>
SyntaxError<span class="token punctuation">:</span> positional argument follows keyword argument

<span class="token comment"># 规则3:当使用位置传参时前面的参数叠满后，移至才会下一个参数（可能不是很好理解），请看下例</span>
<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">3</span> c <span class="token operator">=</span> a args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'x'</span><span class="token punctuation">:</span> <span class="token number">99</span><span class="token punctuation">&#125;</span>

<span class="token comment"># 规则4:表明某一个参数接受了两个或以上的传参时则会报错,并不会是更新为最后传递的参数</span>
<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> a<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">)</span>
TypeError<span class="token punctuation">:</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span> got multiple values <span class="token keyword">for</span> argument <span class="token string">'a'</span>

<span class="token comment"># 规则5:不同参数对传参的掠夺能力:必选参数 > 默认参数 > 可变参数 > 命名关键字参数 > 关键字参数</span>
<span class="token comment"># 前面三个参数的大小关系主要是由其‘函数定义时就已经定好的参数位置关系’决定，关键字参数和可变参数的大小关系并不会影响什么，因为他们接受的传参类型完全不同，一个只能是value，一个必须是key=value。而后面关键字参数的掠夺能力与前三个参数的关系则很重要，如下例:</span>
<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> a<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">)</span>
TypeError<span class="token punctuation">:</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span> got multiple values <span class="token keyword">for</span> argument <span class="token string">'a'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="字符串细节">字符串细节</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 众所周知，Python把当做了字符串当做了一个tuple来处理</span>
<span class="token comment"># 所以利用切片和迭代的性质可以非常快捷的处理字符串</span>

<span class="token triple-quoted-string string">'''
	切片小细节:
		请问下面代码的输出结果是什么?
'''</span>

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token triple-quoted-string string">'''
	根据以上代码得结果表明: 与索引不同的是，切片在超出范围的时候并不会报错，而是将满足要求的元素进行输出
	验证代码如下:
'''</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	b<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">55</span><span class="token punctuation">:</span><span class="token number">55</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">55</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	b<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">55</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span> b<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span> b<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	b<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	b<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment"># 根据上面几个例子打开可以归纳出切片的导出细则:</span>
<span class="token comment"># 1.首先计算出第一,二个index所代表的位置</span>
<span class="token comment"># 2.观察是否满足第三个value的正负号规则</span>
<span class="token comment"># 3.如果不满足直接返回空list[]</span>
<span class="token comment"># 4.如果满足，则计算切片是否超出list范围</span>
<span class="token comment"># 5.如果超出则把超出的一边或者两边定义在list的边界上</span>
<span class="token comment"># 6.如果未超出则按正常次序计算</span>

<span class="token triple-quoted-string string">'''
	question:
		利用切片操作，实现一个trim()函数，去除字符串首尾的空格，
'''</span>

<span class="token keyword">def</span> <span class="token function">trim</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> s
    <span class="token keyword">while</span> s<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">:</span>
          s <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">while</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">:</span>
          s <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> s

<span class="token comment"># 现在来解释一下，为什么要引入这个例子，因为:</span>
<span class="token comment"># 你可能认为 s[-1:] 和 s[-1]是同一个东西，但是事实上，前者为切片，超出范围会自动限制在list边界处，后者为索引，超出范围会直接报错, 我们看一个更为容易理解的例子:</span>
s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	s<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span> s<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
Error
<span class="token comment"># 上例中对于lenth为0的list而言，s[-1:] 即代表s的全部即[]，而s[-1] 则会报错显示index超出了。</span>

但事实上，上述问题才用的方法并不是值得推崇的，因为在利用切片赋值时会开辟内存空间，从而占用了大量不必要的内存，所以比较好的做法是先找到非<span class="token string">' '</span>元素的index，再通过切片一次性赋值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="listtupledict一类的迭代原理-与zip-的区别">list<code>,</code>tuple<code>,</code>dict<code>一类的迭代原理 与</code>zip` 的区别</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    	<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token number">3</span> <span class="token number">9</span>

<span class="token triple-quoted-string string">'''
	对上述代码结果的解释:
		对于可迭代对象[((1, 1), (2, 4)), (3, 9)]而言,其第一个迭代元素为((1, 1), (2, 4))
												其第二个迭代元素为(3,9)
		所以将第一次迭代时, x = (1,1), y = (2, 4)
			 第二次迭代时, x = 3, y = 9
	但是对于generator 和 iterator的原理还有待考量
'''</span>

<span class="token comment"># zip()函数</span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 他会生成一个迭代器，且每次的迭代元素是对应的元素组成的一个tuple</span>
<span class="token comment"># 相当于他会生成一个[(1,5),(2,3),(3,8)]的可迭代对象</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="细究-list-生成式">细究 <code>list</code> 生成式</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	探究list生成式中，if放前面和放后面的区别
'''</span>
<span class="token operator">>></span><span class="token operator">></span>	L1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'World'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span> L1
<span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'World'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	L2 <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> L1 <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	L2
<span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">]</span>

<span class="token operator">>></span><span class="token operator">></span>	L3 <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token keyword">else</span> s <span class="token keyword">for</span> s <span class="token keyword">in</span> L1<span class="token punctuation">]</span>
<span class="token operator">>></span><span class="token operator">></span>	L3
<span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>

<span class="token triple-quoted-string string">'''
	上例可知对于列表生成式而言，
		if放for前面: 和else连用形成一个类似三目运算符的效果，其返回的是一个值，并不能作为筛选依据，所以if放前面时，并不会改变生成list的元素个数
		if放for后面: 构成对for的迭代元素的筛选依据，其决定了迭代的元素s是否返回给生成式，所以不会影响到最终生成元素的值，而是对元素进行筛选，改变生成list的元素个数
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="generator-创建方式"><code>generator</code> 创建方式</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 方式1，类似于列表生成式，但是要将列表生成式的[]，改为()</span>
<span class="token operator">>></span><span class="token operator">></span>	a <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">for</span> i <span class="token keyword">in</span> a<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token number">0</span>
<span class="token number">1</span>
<span class="token number">4</span>
<span class="token number">9</span>
<span class="token number">16</span>
<span class="token number">25</span>
<span class="token number">36</span>
<span class="token number">49</span>
<span class="token number">64</span>
<span class="token number">81</span>
<span class="token comment"># 也可以通过调用next(a)来进行遍历操作</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 方式2，通过 yield 可以将普通的函数转换为列表生成式</span>
<span class="token operator">>></span><span class="token operator">></span>	define a<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>		i<span class="token punctuation">,</span> <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    	<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> <span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>			<span class="token builtin">sum</span> <span class="token operator">+=</span> i
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>			<span class="token keyword">yield</span> <span class="token builtin">sum</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>			i <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token operator">>></span><span class="token operator">></span>	b <span class="token operator">=</span> a<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	b
<span class="token operator">&lt;</span>generator <span class="token builtin">object</span> a at <span class="token number">0x0000027213B0CD68</span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">for</span> i <span class="token keyword">in</span> b<span class="token punctuation">:</span>
    	<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">3</span>
<span class="token number">6</span>
<span class="token number">10</span>
<span class="token number">15</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 但是当我们使用函数来当生成器时，我们很难拿到return的值，事实上，默认生成器里面只有yield的值，如下</span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">def</span> <span class="token function">fib_ge</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    n<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">&lt;</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        <span class="token keyword">yield</span> b
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        n <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">return</span> <span class="token string">'done'</span>


<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">for</span> i <span class="token keyword">in</span> fib_ge<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">5</span>
<span class="token number">8</span>
<span class="token number">13</span>
<span class="token number">21</span>
<span class="token number">34</span>
<span class="token number">55</span>
<span class="token number">89</span>

<span class="token comment"># 如果想要得到函数的真正返回值，我们需要使用next函数。</span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">def</span> <span class="token function">fib_ge</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    n<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">&lt;</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        <span class="token keyword">yield</span> b
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        n <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">return</span> <span class="token string">'done'</span>

<span class="token operator">>></span><span class="token operator">></span>	a <span class="token operator">=</span> fib_ge<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        x <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	    <span class="token keyword">except</span> StopIteration <span class="token keyword">as</span> e<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	        <span class="token keyword">break</span>

<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">5</span>
<span class="token number">8</span>
<span class="token number">13</span>
<span class="token number">21</span>
<span class="token number">34</span>
<span class="token number">55</span>
<span class="token number">89</span>
done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>还有一件事，使用generator的时候一定要把它先赋给某个变量，不然对generator调用next()函数永远都只会得到相同的初始值时</p>
</blockquote>
<h3 id="高阶函数">高阶函数</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	介绍几个比较常用的python内置的高阶函数
'''</span>

<span class="token comment"># 1. map()</span>
<span class="token triple-quoted-string string">'''
	用法: map(用于转换func,可迭代序列A)
	返回值: Iterator
	功能: 将A中的每一个元素都带入func中，得到的返回值作为返回的iterator对应的元素
'''</span>

<span class="token comment"># 2. reduce()</span>
<span class="token triple-quoted-string string">'''
	用法: reduce(用于计算的func,可迭代序列B)
	返回值: 最后的结果
	功能: func必须接收两个变量，将B中的头两个元素带入func中得到的结果再与第三个一起作为变量传递给func，如此循环，直至到最后一个元素
'''</span>

<span class="token comment"># 3. filter()</span>
<span class="token triple-quoted-string string">'''
	用法: filter(用于判断的func,可迭代序列C)
	返回值: Iterator
	功能:将C中的每一个元素都带入func中进行检验，返回值为True保留，为False则被丢弃，所有保留下来的元素成为iterator对应的元素
'''</span>

<span class="token comment"># 4.sorted()</span>
<span class="token triple-quoted-string string">'''
	用法:sorted(待排序的list或者dict D, key=用于转换的func, reverse=True)
	返回值: Iterator
	功能:将D中的元素先通过func转换之后再进行排序.
	Example:
		sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower, reverse=True)
		['about', 'bob', 'Credit', 'Zoo']
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="返回函数闭包">返回函数(闭包)</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 闭包的关键点在于理解变量的作用域</span>
<span class="token triple-quoted-string string">'''
	下面是一些关于如何理解返回函数的例子:
		例子1 返回函数的定义
		例子2，3 使用返回函数时的常见错误(对变量作用域的误解)
		例子4，5 闭包的好处(4.当闭包执行完后，仍然能够保持住当前的运行环境(记忆性), 5.闭包可以根据外部作用域的局部变量来得到不同的结果(更灵活))
'''</span>

<span class="token comment"># 例1: 闭包的基本定义:在函数中定义了函数，并且内函数调用了外部函数的变量</span>
<span class="token keyword">def</span> <span class="token function">lazy_sum</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        ax <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> n <span class="token keyword">in</span> args<span class="token punctuation">:</span>
            ax <span class="token operator">=</span> ax <span class="token operator">+</span> n
        <span class="token keyword">return</span> ax
    <span class="token keyword">return</span> <span class="token builtin">sum</span>

<span class="token operator">>></span><span class="token operator">></span>	a <span class="token operator">=</span> lazy_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span>	a<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">11</span>





<span class="token comment"># 例2: 返回函数中使用可变变量时</span>
<span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
             <span class="token keyword">return</span> i<span class="token operator">*</span>i
        fs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    <span class="token keyword">return</span> fs

f1<span class="token punctuation">,</span> f2<span class="token punctuation">,</span> f3 <span class="token operator">=</span> count<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span>	f1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>
<span class="token operator">>></span><span class="token operator">></span>	f2<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>
<span class="token operator">>></span><span class="token operator">></span>	f3<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>

<span class="token triple-quoted-string string">'''
	解释为何会出现如下结果:
		官方解释: 返回的函数并没有立刻执行，而是直到调用了f()才执行
		我的理解: 在调取返回函数时,函数开始找参数，根据之前的规则我们知道函数肯定是从上往下挨个找的，当他里面没有定义i这个local变量时，就回去找他的下面一层（外函数）中是否有定义i，发现确实是有定义的，于是就返回该i的平方，此时i为3，故而都返回的是9
		奇怪之处: 在C语言里面，一般来说循环变量用完就会被扔掉了，Python为何可以找到呢？原因在于Python并没有规定循环变量的作用域，如果他在地面上使用，那么全局的i都会被改变，如果他在函数A里面使用，那么函数A的i变量就会被改变，如下例:
'''</span>
<span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    i <span class="token operator">=</span> <span class="token number">1000</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    
<span class="token operator">>></span><span class="token operator">></span>	count<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>

<span class="token comment"># 代码改进</span>
<span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">def</span> <span class="token function">f_2</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span>			<span class="token comment"># 此处的j的作用域是函数f_2(),比起外函数count的j,f在被调用时会优先选择f_2()的j</span>
        <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> j<span class="token operator">*</span>j
        <span class="token keyword">return</span> f
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 	<span class="token comment"># 此处的j的作用域是整个函数count </span>
   		fs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f_2<span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment"># 这是起决定性的一步，在函数f_2被调用的时候,f_2里面所用的变量就已经被计算出来了,此时返回的f，在之后的调用过程中的参数会取决于此时f_2中的所有参数</span>
    <span class="token keyword">return</span> fs






<span class="token comment"># 例3: 在返回函数中是不能更改外部变量的</span>
<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
    a <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
        a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> a
    <span class="token keyword">return</span> bar

<span class="token triple-quoted-string string">'''
	报错原因: 这是因为在执行代码 c = foo()时，python会导入全部的闭包函数体bar()来分析其的局部变量，python规则指定所有在赋值语句左面的变量都是局部变量，则在闭包bar()中，变量a在赋值符号"="的左面，被python认为是bar()中的局部变量。再接下来执行print c()时，程序运行至a = a + 1时，因为先前已经把a归为bar()中的局部变量，所以python会在bar()中去找在赋值语句右面的a的值，结果找不到，就会报错。解决的方法很简单
	1. 使用nonlocal或global的关键字
		
	2. 使用list等可变类型
'''</span>

<span class="token comment"># 1</span>
<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
	a <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
        <span class="token keyword">nonlocal</span> a
        a <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> a 
    <span class="token keyword">return</span> bar


<span class="token comment"># 2</span>
<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
	a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
        a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
    <span class="token keyword">return</span> bar






<span class="token comment"># 例4: 返回函数保持住当前的运行环境</span>
origin <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment"># 坐标系统原点 </span>
legal_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span> <span class="token comment"># x轴方向的合法坐标 </span>
legal_y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span> <span class="token comment"># y轴方向的合法坐标 </span>
<span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>pos<span class="token operator">=</span>origin<span class="token punctuation">)</span><span class="token punctuation">:</span> 
    <span class="token keyword">def</span> <span class="token function">player</span><span class="token punctuation">(</span>direction<span class="token punctuation">,</span>step<span class="token punctuation">)</span><span class="token punctuation">:</span> 
  	<span class="token comment"># 这里应该首先判断参数direction,step的合法性，比如direction不能斜着走，step不能为负等 </span>
    <span class="token comment"># 然后还要对新生成的x，y坐标的合法性进行判断处理，这里主要是想介绍闭包，就不详细写了。 </span>
    	new_x <span class="token operator">=</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> direction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>step 
		new_y <span class="token operator">=</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> direction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>step 
		pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> new_x 
		pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> new_y <span class="token comment"># 注意！此处不能写成 pos = [new_x, new_y]，原因在上文有说过 </span>
		<span class="token keyword">return</span> pos 
	<span class="token keyword">return</span> player 
  
player <span class="token operator">=</span> create<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 创建棋子player，起点为原点 </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>player<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 向x轴正方向移动10步 </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>player<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 向y轴正方向移动20步 </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>player<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 向x轴负方向移动10步</span>

<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>

<span class="token triple-quoted-string string">'''
	我来谈一下对返回函数记忆性的理解:
		在上述代码 ‘player = create()’ 执行时，执行了函数creat, creat()中player()外的变量全部被创造出来了,并放置在某一个未知空间(其实就只有两个变量，即变量pos和函数变量player),在调用player时候，因为是通过可变类型list进行传递的参数，所以是可以在返回函数执行过程中改变外部变量的值的，于是存在于未知空间的变量pos就这样被改来改去，并且每次调用player时，接受的也是这样的一个pos,于是通过这个pos变量，具有了记忆性，如果pos不能使list类型，则需要在中player中使用nonlocal关键字
'''</span>


<span class="token comment"># 例5: 返回函数根据外部作用域的局部变量来得到不同的结果（灵活性）</span>
<span class="token keyword">def</span> <span class="token function">make_filter</span><span class="token punctuation">(</span>keep<span class="token punctuation">)</span><span class="token punctuation">:</span> 
    <span class="token keyword">def</span> <span class="token function">the_filter</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">:</span> 
        <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span> 
        lines <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> 
        filter_doc <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> lines <span class="token keyword">if</span> keep <span class="token keyword">in</span> i<span class="token punctuation">]</span> 
        <span class="token keyword">return</span> filter_doc 
    <span class="token keyword">return</span> the_filter

<span class="token comment"># 显然当我们传递进去不同参数是,我们便可以进行不一样的功能</span>
<span class="token comment"># 如果我们需要取得文件"result.txt"中含有"pass"关键字的行，则可以这样使用例子程序</span>
<span class="token builtin">filter</span> <span class="token operator">=</span> make_filter<span class="token punctuation">(</span><span class="token string">"pass"</span><span class="token punctuation">)</span>
filter_result <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token string">"result.txt"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="聪明人才看得懂的例子">聪明人才看得懂的例子</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	请说出下面两个生成器的区别
'''</span>

<span class="token keyword">def</span> <span class="token function">_odd_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> <span class="token number">3</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> a
        a <span class="token operator">+=</span> <span class="token number">2</span>

<span class="token keyword">def</span> <span class="token function">_not_divisible</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">%</span> n <span class="token operator">></span> <span class="token number">0</span>

<span class="token keyword">def</span> <span class="token function">primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    it <span class="token operator">=</span> _odd_iter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 初始序列</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token comment"># 返回序列的第一个数</span>
        <span class="token keyword">yield</span> n
        it <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>_not_divisible<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> it<span class="token punctuation">)</span> <span class="token comment"># 构造新序列</span>

<span class="token keyword">def</span> <span class="token function">primes_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    it <span class="token operator">=</span> _odd_iter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 初始序列</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token comment"># 返回序列的第一个数</span>
        <span class="token keyword">yield</span> n
        it <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">%</span> n <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">,</span> it<span class="token punctuation">)</span> <span class="token comment"># 构造新序列</span>

pri <span class="token operator">=</span> prime<span class="token punctuation">(</span><span class="token punctuation">)</span>
pri_2 <span class="token operator">=</span> prime_2<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        
<span class="token triple-quoted-string string">'''
	傻瓜才会看得程序运行顺序分析:
		对于Primes()这个生成器的对象pri而言,他的运行顺序为:
			第一次执行next(pri):
				1. 执行 yield 2
				2. 跳出
				
			第二次执行next(pri):
				1. 执行 it = _odd_iter(), 将生成一个‘从三开始，只含奇数’的迭代对象
				2. 进入 while()循环
				3. 第一次执行 next(it):
					1. return 3
					2. 跳出
				4. 将返回值‘3’赋给n
				5. yield n(3)
				6. 跳出
				
			第三次执行next(pri):
				1. 执行 it = filter(_not_divisible(n), it):
					1. 开辟一片内存，来调用_not_divisible(n):
						2. 传入参数n(3) # 因为这里是直接调用了函数，而并不是简简单单的函数名赋值，所以这个函数空间里面的所有参数(除了内函数lambda里面独有的参数)都已经被计算出来了,所以这里的n已经占据了函数空间的一片区域，并且不会改变(除非内函数里面引入nonlocal这种关键字),我将这片内存空间里面的这个变量称为n_1(这与传入的参数的内存空间是不一样的)
						3. 返回lambda表达式
					2. 将返回的对象，即lambda表达式传递给filter作为判断func # 此时由于，只是将匿名函数当一个变量传递给了filter，而没有去调用它，所以lambda表达式中的参数值n并不会确定下来
					3. 将迭代对象it传递给filter
					4. filter 函数返回一个迭代对象给新的it_1(我这么叫是为了区分之后的it序列), 因为filter已经执行了所以可以肯定filter里面的参数的必然已经确定下来了，即‘调用的判断规则 _not_divisible(3)’和‘参考的原始generator’ 已经确定，但原始的generator还没调用，所以仍然停在3这个位置
				2. 重新开始循环
				3. 执行 next(it_1):
					1. 首先是调用原始的generator 'it':
						1. a += 2
						2. yield a(5)
					2. 判断是否满足判断规则 ‘_not_divisible(3)’:
						1. 传入 it 生成的 5 到匿名函数中
						2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(3)中找到，即n=3
						3. 判断得出:不能整除3，所以返回5
				4. 执行 n = 5
				5. 执行 yield n(5)
				6. 跳出
				
			第四次执行next(pri):
				1.  执行 it_2 = filter(_not_divisible(5), it_1) # 这标注下标也只是为了区分其不同
				2.	重新开始循环	
				3. 执行 next(it_2):
					1. 首先是调用他的上一个的generator 'it_1':
						1. 调用'it_1'的generator 'it':
							1. a += 2
							2. yield a(7)
						2. 判断是否满足判断规则 ‘_not_divisible(3)’:
							1. 传入 it 生成的 7 到匿名函数中
							2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(3)中找到，即n=3
							3. 判断得出:不能整除3，所以返回7
					2. 判断是否满足判断规则 ‘_not_divisible(5)’:
						1. 传入 it 生成的 7 到匿名函数中
						2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(5)中找到，即n=5
						3. 判断得出:不能整除5，所以返回7
				4. 执行 n = 7
				5. 执行 yield n(7)
				6. 跳出


			第五次执行next(pri):
				1. 执行 it_3 = filter(_not_divisible(7), it_2) # 这标注下标也只是为了区分其不同
				2. 重新开始循环	
				3. 执行 next(it_3):
					1. 首先是调用他的上一个的generator 'it_2':
						1. 调用'it_2'的generator 'it_1':
							1. 调用'it_1'的上一个generator 'it':
								1. a += 2
								2. yield a(9)
							2. 判断是否满足判断规则 ‘_not_divisible(3)’:
								1. 传入 it 生成的 7 到匿名函数中
								2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(3)中找到，即n=3
							3. 判断得出:能整除3，所以再一次调用generator'it':
								1. a += 2
								2. yield a(11)
							4. 判断是否满足判断规则 ‘_not_divisible(3)’:
								1. 传入 it 生成的 7 到匿名函数中
								2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(3)中找到，即n=3
							5. 判断得出:不能整除3:
								1. a += 2
								2. yield a(11)
						2. 判断是否满足判断规则 ‘_not_divisible(5)’:
							1. 传入 it 生成的 11 到匿名函数中
							2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(5)中找到，即n=5
							3. 判断得出:不能整除5，所以返回11
					2. 判断是否满足判断规则 ‘_not_divisible(7)’:
						1. 传入 it 生成的 11 到匿名函数中
						2. 执行 lambda x: x % n > 0 # 这里lambda表达式的n会从_not_divisible(7)中找到，即n=7
						3. 判断得出:不能整除7，所以返回11
				4. n = 11
				5. 执行 yield n(11)
				6. 跳出
				
'''</span>

<span class="token triple-quoted-string string">'''
		如果对pri_2进行一波顺寻分析，会发现主要的不同在于,它的判断规则从 ‘_not_divisible(3)’, ‘_not_divisible(5)’, ‘_not_divisible(7)’ 分别变成了‘lambda x: x % n > 0’, ‘lambda x: x % n > 0’, ‘lambda x: x % n > 0’, 因为在每一次执行时,前者判断条件里面的n来源于已经创造的函数空间中的变量n, 即3,5,7。而后者因为并不是返回函数，且本身并没有定义n，所以会自动在外层函数中找n,最终找到了定义在prime_2()中的n值, 故而三个lambda表达式都是使用的一样的n值。
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="装饰器">装饰器</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 装饰器主要用于增强函数的功能，本质上，decorator就是一个返回函数的高阶函数</span>
<span class="token triple-quoted-string string">'''
	下面将举几个例子来帮助理解装饰器的行为及其用法:
		例1: 基本使用
		例2: 带参数的decorator
		例3: 使用decorator的decorator(常用)
		例4: 提前执行func,并以变量作为返回值的装饰器(最常用)
'''</span>

<span class="token comment"># 例1: 基本使用</span>
<span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call %s():'</span> <span class="token operator">%</span> func<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span>
        <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
    <span class="token keyword">return</span> wrapper

<span class="token decorator annotation punctuation">@log</span>
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2020-12-2'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span>	now<span class="token punctuation">(</span><span class="token punctuation">)</span>
call now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">2</span>

<span class="token comment"># 实际上在执行now()这一步可以拆分为两步:</span>
<span class="token comment">#				1. now_1 = log(now)</span>
<span class="token comment">#				2. now_1():</span>
<span class="token comment">#					1. wrapper():</span>
<span class="token comment">#						1. print('call %s():' % now.__name__)</span>
<span class="token comment">#						2. return now()</span>
<span class="token comment">#					2. now()</span>



<span class="token comment"># 例2: 带参数的decorator</span>
<span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s %s():'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> func<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
        <span class="token keyword">return</span> wrapper
    <span class="token keyword">return</span> decorator

<span class="token decorator annotation punctuation">@log</span><span class="token punctuation">(</span><span class="token string">'excute'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2020-12-2'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> now<span class="token punctuation">(</span><span class="token punctuation">)</span>
excute now<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">12</span>

<span class="token comment"># 执行顺序分析:</span>
<span class="token comment"># 1. now_1 = log('excute')(now):</span>
<span class="token comment">#		1. text = 'excute'</span>
<span class="token comment">#		2. now_1 = decorator(now)</span>
<span class="token comment"># 2. now_1():</span>
<span class="token comment">#		1. wrapper():</span>
<span class="token comment">#			1. print('%s %s():' % ('excute', now.__name__))</span>
<span class="token comment">#			2. return now()</span>
<span class="token comment">#		2. now()</span>




<span class="token comment"># 例3: 使用decorator的decorator(常用)</span>
<span class="token keyword">import</span> functools

<span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">decorator_1</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token decorator annotation punctuation">@functools<span class="token punctuation">.</span>wraps</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s %s():'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> func<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
        <span class="token keyword">return</span> wrapper
    <span class="token keyword">return</span> decorator

<span class="token comment"># 其中@functools.wraps(func)使用这个装饰器是为了将函数在使用了@decorator这个装饰器之后,把 .__name__这一属性保持不变</span>


<span class="token comment"># 如果不加上@functools.wraps(func)</span>
<span class="token decorator annotation punctuation">@log</span>
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2020-12-2'</span><span class="token punctuation">)</span>

    
<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> now
<span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">.</span>__name__
<span class="token string">'decorator_1'</span>


<span class="token comment"># 加上@functools.wraps(func)这一语句后</span>
<span class="token decorator annotation punctuation">@log</span>
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2020-12-2'</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> now    
<span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">.</span>__name__
<span class="token string">'now'</span>



<span class="token comment"># 例4: 提前执行func,并以变量作为返回值的装饰器(最常用)</span>
<span class="token keyword">import</span> time<span class="token punctuation">,</span> functools

<span class="token keyword">def</span> <span class="token function">metric</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@functools<span class="token punctuation">.</span>wraps</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">decoretor</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        t0 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
        back <span class="token operator">=</span> fn<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        delta_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s executed in %s ms'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> delta_time<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> back
    <span class="token keyword">return</span> decoretor

<span class="token comment"># 可见返回的是变量back,使用这样的方法可以在执行decorator()的过程中就调用函数,并得到相关信息,而并不需要等到decorator都执行完了最后才调用函数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="偏函数">偏函数</h3>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 当我们大量使用某一个函数是，我们想要将某些参数固定下来，我们会引入偏函数的概念</span>

<span class="token comment"># 例1: 手动创建偏函数</span>
<span class="token keyword">def</span> <span class="token function">int2</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> base<span class="token punctuation">)</span>

<span class="token comment"># 例2: 利用functools.partial()函数创建偏函数</span>
int2 <span class="token operator">=</span> functools<span class="token punctuation">.</span>partial<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 实际上functools.partial()接收三个参数, partial(func, *args, **keywords), 其中第一个为函数名，后面两个参数将分别作为位置传参和关键字传参传入到func中</span>

<span class="token comment"># 如:</span>
int2 <span class="token operator">=</span> functools<span class="token punctuation">.</span>partial<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
int2<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">,</span>base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

max10 <span class="token operator">=</span> functools<span class="token punctuation">.</span>partial<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
max10<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="模块初步">模块初步</h3>
<h4 id="模块简介">模块简介</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token string">' a test module '</span>

__author__ <span class="token operator">=</span> <span class="token string">'Michael Liao'</span>

<span class="token keyword">import</span> sys

<span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    args <span class="token operator">=</span> sys<span class="token punctuation">.</span>argv
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, %s!'</span> <span class="token operator">%</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Too many arguments!'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>
    test<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	第1行和第2行是标准注释，第1行注释可以让这个hello.py文件直接在Unix/Linux/Mac上运行，第2行注释表示.py文件本身使用标准UTF-8编码；

	第4行是一个字符串，表示模块的文档注释，任何模块代码的第一个字符串都被视为模块的文档注释；

	第6行使用__author__变量把作者写进去，这样当你公开源代码后别人就可以瞻仰你的大名
	
	以上就是Python模块的标准文件模板，当然也可以全部删掉不写，但是，按标准办事肯定没错。
	
	
	
	后面开始就是真正的代码部分。
	
	第8行import sys导入内建的系统模块
	
	sys模块有一个argv变量，用list存储了命令行的所有参数。argv至少有一个元素，因为第一个参数永远是该.py文件的名称，例如：
	运行python3 hello.py获得的sys.argv就是['hello.py']
	运行python3 hello.py Michael获得的sys.argv就是['hello.py', 'Michael']
	
	最后两行:
		if __name__=='__main__':
   	 		test()
   	 	当我们在命令行运行hello模块文件时，Python解释器把一个特殊变量__name__置为__main__，而如果在其他地方导入该hello模块时，if判断将失败，因此，这种if测试可以让一个模块通过命令行运行时执行一些额外的代码，最常见的就是运行测试:
   	 	情况1: //直接运行hello.py，判定__name__ == __main__, 所以直接执行test()
   	 		$ python3 hello.py
			Hello, world!
			$ python hello.py Michael
			Hello, Michael!
		情况2: //导入hello模块时,虽然最后两行也被导入了,但是不同的是__name__ ！= __main__, 所以不执行test(), 如需执行则需要手动调用test()
			$ python3
			Python 3.4.3 (v3.4.3:9b73f1c3e601, Feb 23 2015, 02:52:03) 
			[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
			Type "help", "copyright", "credits" or "license" for more information.
			>>> import hello
			>>> hello.test()
			Hello, world!				
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="作用域数据封装">作用域(数据封装)</h4>
<ol type="1">
<li><p>特殊变量(魔法变量): <code>__xxx__</code> : <code>__author__</code>,<code>__name__</code>,<code>__doc__</code> 可以被直接引用，但是有特殊用途</p></li>
<li><p>私有变量:<code>_xxx</code> 或者<code>__xxx</code> : 不应该被直接引用 一个下划线开头的实例变量名，比如<code>_name</code>，这样的实例变量外部是可以访问的，但是，按照约定俗成的规定，当你看到这样的变量时，意思就是，“虽然我可以被访问，但是，请把我视为私有变量，不要随意访问”。</p>
<p>​ 双下划线开头的实例变量是不是一定不能从外部访问呢？其实也不是。不能直接访问<code>__name</code>是因为Python解释器对外把<code>__name</code>变量改成了<code>_Student__name</code>，所以，仍然可以通过<code>_Student__name</code>来访问<code>__name</code>变量：</p></li>
<li><p>公开变量: <code>xxx</code></p></li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 常见错误</span>
<span class="token operator">>></span><span class="token operator">></span> bart <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'Bart Simpson'</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> bart<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Bart Simpson'</span>
<span class="token operator">>></span><span class="token operator">></span> bart<span class="token punctuation">.</span>__name <span class="token operator">=</span> <span class="token string">'New Name'</span> <span class="token comment"># 设置__name变量！</span>
<span class="token operator">>></span><span class="token operator">></span> bart<span class="token punctuation">.</span>__name
<span class="token string">'New Name'</span>

<span class="token comment"># 表面上看，外部代码“成功”地设置了__name变量，但实际上这个__name变量和class内部的__name变量不是一个变量！内部的__name变量已经被Python解释器自动改成了_Student__name，而外部代码给bart新增了一个__name变量。不信试试：</span>

<span class="token operator">>></span><span class="token operator">></span> bart<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># get_name()内部返回self.__name</span>
<span class="token string">'Bart Simpson'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="这里有一个值得注意的但不知道放到哪里的实际案例">这里有一个值得注意的但不知道放到哪里的实际案例</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">F</span><span class="token punctuation">:</span>
    val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    val_2 <span class="token operator">=</span> <span class="token number">3</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    
f1 <span class="token operator">=</span> F<span class="token punctuation">(</span><span class="token punctuation">)</span>
f2 <span class="token operator">=</span> F<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">.</span>val<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 
<span class="token operator">>></span><span class="token operator">></span> f2<span class="token punctuation">.</span>val
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>       <span class="token comment"># 对f1实例中属性的操作，影响到了f2</span>

<span class="token operator">>></span><span class="token operator">></span> f1<span class="token punctuation">.</span>val_2 <span class="token operator">+=</span> <span class="token number">1</span> 
<span class="token operator">>></span><span class="token operator">></span> f2<span class="token punctuation">.</span>val_2	 <span class="token comment"># 对f1实例中属性的操作，没有影响到f2</span>
<span class="token number">3</span>

<span class="token operator">>></span><span class="token operator">></span> f3 <span class="token operator">=</span> F<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> f3<span class="token punctuation">.</span>val
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>	<span class="token comment">#可以说对实例f1的操作，已经影响到了这个类</span>

<span class="token comment"># 以上现象的本质原因是Python的可变和不可变数据类型所决定的，这是因为在实例化后，类变量是各个实例共享的对象，都指向同一个内存地址，起先f1.val_2和f2.val_2是指向同一个内存地址，f1.val和f2.val是指向同一内存地址，但f1.val_2和f2.val_2指向的是一个数字，而f1.val和f2.val指向的是一个列表，数字是一个不可变对象，列表是一个可变对象，所以在执行f1.val_2 += 2后，f1.val_2新创建了一个指向数字“7”的对象，而f2.val_2还是指向实例化时指向数字“5”的对象；而向列表中增加一个元素并不会创建一个新的对象，所以f1.val和f2.val依然指向同一个内存地址。</span>
<span class="token comment"># 但这种现象仅限于对于 ‘类中已经定义好的可变类型变量’ 进行更改时会出现，而对于类中未定义, 而是在使用实例时新增加的属性，则不会有这种担心</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="继承和多态">继承和多态</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 和函数在选择参数时，从高楼层往低楼层找，这个原理是类似的。子类的方法和变量也会优先在该类中找，找不到之后才会到父类中找，并一层一层往下</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="多继承">1 多继承</h5>
<h6 id="mro">1 MRO</h6>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># MRO遵循以下规则：</span>
<span class="token comment"># 	1. 本地优先级： 根据声明顺序从左往右查找</span>
<span class="token comment"># 	2. 单调性： 所有子类中，也应满足其查找顺序</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 生成MRO采用的是C3 算法，而C3算法中重点是一个merge函数，那先来看一个执行merge时步骤：</span>
<span class="token comment"># 		1. 顺序遍历列表</span>
<span class="token comment">#		2. 查找首元素满足以下条件，否则遍历下一个序列</span>
<span class="token comment">#				1. 在其他序列也是首元素</span>
<span class="token comment">#				2.	或者在其他序列里不存在</span>
<span class="token comment">#		3. 从所有序列中移除此元素，合并到MRO序列中</span>
<span class="token comment">#		4. 重复执行，直到所有序列为空或无法执行下去</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 实例演示:</span>
<span class="token comment">#</span>
<span class="token comment"># 例1:</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment">#	mro(B) = [B,O] </span>
<span class="token comment">#	[B,O]中的字母O表示的就是object</span>



<span class="token comment"># 例2:</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment"># 	mro(B) = [B] + merge(mro(A),[A])</span>
<span class="token comment">#	mro(B) = [B] + merge([A,O],[A])</span>
<span class="token comment">#	mro(B) = [B,A] + merge([O])</span>
<span class="token comment">#	mro(B) = [B,A,O]</span>




<span class="token comment"># 例3:</span>
<span class="token keyword">class</span> <span class="token class-name">A1</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">B1</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">C1</span><span class="token punctuation">(</span>A1<span class="token punctuation">,</span>B1<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">pass</span>
<span class="token comment"># 	mro(C1) = [C1] + merge(mro(A1),mro(B1),[A1,B1])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A1,O],[B1,O],[A1,B1])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([O],[B1,O],[B1])</span>
<span class="token comment"># 	mro(C1) = [C1,A1,B1] + merge([O],[O])</span>
<span class="token comment"># 	mro(C1) = [C1,A1,B1,O]</span>

<span class="token keyword">class</span> <span class="token class-name">C2</span><span class="token punctuation">(</span>B1<span class="token punctuation">,</span>A1<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment"># 	mro(C2) = [C2] + merge(mro(B1),mro(A1),[A1,B1])</span>
<span class="token comment"># 	mro(C2) = [C2] + merge([B1,O],[A1,O],[B1,A1])</span>
<span class="token comment"># 	mro(C2) = [C2] + merge([O],[A1,O],[A1])</span>
<span class="token comment"># 	mro(C2) = [C2,B1,A1] + merge([O],[O])</span>
<span class="token comment"># 	mro(C2) = [C2,B1,A1,O]</span>



<span class="token comment"># 例4:</span>
<span class="token keyword">class</span> <span class="token class-name">A2</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">B2</span><span class="token punctuation">(</span>A2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">C1</span><span class="token punctuation">(</span>A2<span class="token punctuation">,</span>B2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment"># 	mro(C1) = [C1] + merge(mro(A2),mro(B2),[A2,B2])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A2,O],( [B2] + merge(mro(A2),[A2]) ),[A2,B2])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A2,O],( [B2] + merge([A2,O],[A2]) ),[A2,B2])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A2,O],( [B2,A2] + merge([O]) ),[A2,B2])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A2,O],[B2,A2,O],[A2,B2])</span>
<span class="token comment"># 	mro(C1) = [C1] + merge([A2,O],[B2,A2,O],[A2,B2])</span>
<span class="token comment">#	mro(C1) = Error</span>

<span class="token keyword">class</span> <span class="token class-name">C2</span><span class="token punctuation">(</span>B2<span class="token punctuation">,</span>A2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment"># 	mro(C2) = [C2] + merge(mro(B2),mro(A2),[B2,A2])</span>
<span class="token comment"># 	mro(C2) = [C2] + merge([B2,A2,O],[A2,O],[B2,A2])</span>
<span class="token comment"># 	mro(C2) = [C2,B2] + merge([A2,O],[A2,O],[A2])</span>
<span class="token comment"># 	mro(C2) = [C2,B2,A2] + merge([O],[O])</span>
<span class="token comment"># 	mro(C2) = [C2,B2,A2,O]</span>

<span class="token comment"># 总结出大概就是子类要放在前面</span>

<span class="token comment"># 其实在一个类中有一个__mro__属性，可显示出查找顺序，如下：</span>
<span class="token operator">>></span><span class="token operator">></span> C2<span class="token punctuation">.</span>__mro__
<span class="token punctuation">(</span>__main__<span class="token punctuation">.</span>C2<span class="token punctuation">,</span> __main__<span class="token punctuation">.</span>B2<span class="token punctuation">,</span> __main__<span class="token punctuation">.</span>A2<span class="token punctuation">,</span> <span class="token builtin">object</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6 id="mixin---混入">2 MIXIN - 混入</h6>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	MIXIN是一种组合的表现，在python是通过多继承来实现组合。

	试想有这样一个场景，我们有一个文档类，文档分为word文档和excel文档，这些文档可以输出到显示器上，也可以输出到打印机上，我们用MIXIN的方式来实现，如下：
'''</span>
<span class="token keyword">class</span> <span class="token class-name">Document</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>content <span class="token operator">=</span> content
  
<span class="token keyword">class</span> <span class="token class-name">Word</span><span class="token punctuation">(</span>Document<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">format</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'i am word,my content is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
  
<span class="token keyword">class</span> <span class="token class-name">Excel</span><span class="token punctuation">(</span>Document<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">format</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'i am excel,my content is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>content<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
	上边定义了三个类，Document类作为Word和Excel类的父类，两个子类分别实现了各自的format方法。这两种文档能输出到打印机和显示器上，所以接下来定义这两个类，如下：
'''</span>        
        
<span class="token keyword">class</span> <span class="token class-name">Monitor</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'&#123;0&#125; on monitor'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token keyword">class</span> <span class="token class-name">Printer</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'&#123;0&#125; on printer'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span>

        
<span class="token triple-quoted-string string">'''
	Monitor和Printer类只继承object类，各自实现了输出功能。如果此时我们想把word文档输出到显示器上、word文档输出到打印机上，或者是想把excel文档输出到显示器、excel文档输出到打印机上，应该怎样实现呢？如下：
'''</span>       
<span class="token keyword">class</span> <span class="token class-name">WordWithMonitor</span><span class="token punctuation">(</span>Monitor<span class="token punctuation">,</span>Word<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
 
<span class="token keyword">class</span> <span class="token class-name">ExcelWithMonitor</span><span class="token punctuation">(</span>Monitor<span class="token punctuation">,</span>Excel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
 
<span class="token keyword">class</span> <span class="token class-name">WordWithPrinter</span><span class="token punctuation">(</span>Printer<span class="token punctuation">,</span>Word<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
 
<span class="token keyword">class</span> <span class="token class-name">ExcelWithPrinter</span><span class="token punctuation">(</span>Printer<span class="token punctuation">,</span>Excel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

wwm <span class="token operator">=</span> WordWithMonitor<span class="token punctuation">(</span><span class="token string">'mix in'</span><span class="token punctuation">)</span>
wwm<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wwm<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>

wwp <span class="token operator">=</span> WordWithPrinter<span class="token punctuation">(</span><span class="token string">'mix in'</span><span class="token punctuation">)</span>
wwp<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wwp<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
	ExcelWithMonitor类和ExcelWithPrinter类实例化出来后效果和上边一样，这样通过继承不同的类组合就可以满足不同的要求，上边的Monitor类和Printer类我们叫做MINXIN类，这种类有以下特征：

	1. 此类一般只包含方法，不包含数据

	2. 此类不能单独实例化，比如上边的Monitor类和Printer，类中没有content这个变量，所以不能单独实例化

	3. 此类一般只继承object类，或继承具有MIXIN类特性的类

	在使用MINXIN这种方式时，一般会把MIXIN类写在继承列表的首位，如class WordWithMonitor(Monitor,Word):，这样能避免因其他类的同名方法覆盖MIXIN类的方法，可以通过__mro__属性来看一下类继承后的查找顺序，如下：
'''</span>
<span class="token operator">>></span><span class="token operator">></span> WordWithMonitor<span class="token punctuation">.</span>__mro__
<span class="token punctuation">(</span>__main__<span class="token punctuation">.</span>WordWithMonitor<span class="token punctuation">,</span>
 __main__<span class="token punctuation">.</span>Monitor<span class="token punctuation">,</span>
 __main__<span class="token punctuation">.</span>Word<span class="token punctuation">,</span>
 __main__<span class="token punctuation">.</span>Document<span class="token punctuation">,</span>
 <span class="token builtin">object</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="获取对象信息反射">获取对象信息(反射)</h4>
<p>详细信息:https://zhaochj.github.io/2016/05/08/2016-05-08-%E5%8F%8D%E5%B0%84/</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 1. 使用type()</span>

<span class="token comment"># 变量</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token builtin">type</span><span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span> <span class="token string">'NoneType'</span><span class="token operator">></span>

<span class="token comment"># 函数 和 自定义类的对象</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'builtin_function_or_method'</span><span class="token operator">></span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'__main__.Animal'</span><span class="token operator">></span>



<span class="token comment"># 2. 调用types模块</span>

<span class="token comment"># check变量是否为函数</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> types
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">def</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token operator">==</span>types<span class="token punctuation">.</span>FunctionType
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">)</span><span class="token operator">==</span>types<span class="token punctuation">.</span>BuiltinFunctionType
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">)</span><span class="token operator">==</span>types<span class="token punctuation">.</span>LambdaType
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">==</span>types<span class="token punctuation">.</span>GeneratorType
<span class="token boolean">True</span>



<span class="token comment"># 3. 使用isinstance()</span>

<span class="token comment"># 总是优先使用isinstance()判断类型，可以将指定类型及其子类“一网打尽”。</span>
<span class="token comment"># 对于一个对象而言，他不仅属于他自己的类，还属于他继承的父类</span>

<span class="token comment"># 并且还可以判断一个变量是否是某些类型中的一种(传入tuple):</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>



<span class="token comment"># 4. 使用dir()</span>

<span class="token comment"># dir()会返回一个包含对象或者类所有属性和方法字符串的list: (既可以传入类名，也可以传入实例化对象)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">dir</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'__class__'</span><span class="token punctuation">,</span>
 <span class="token string">'__delattr__'</span><span class="token punctuation">,</span>
 <span class="token string">'__dir__'</span><span class="token punctuation">,</span>
 <span class="token string">'__doc__'</span><span class="token punctuation">,</span>
 <span class="token string">'__eq__'</span><span class="token punctuation">,</span>
 <span class="token string">'__format__'</span><span class="token punctuation">,</span>
 <span class="token string">'__ge__'</span><span class="token punctuation">,</span>
 <span class="token string">'__getattribute__'</span><span class="token punctuation">,</span>
 <span class="token string">'__gt__'</span><span class="token punctuation">,</span>
 <span class="token string">'__hash__'</span><span class="token punctuation">,</span>
 <span class="token string">'__init__'</span><span class="token punctuation">,</span>
 <span class="token string">'__init_subclass__'</span><span class="token punctuation">,</span>
 <span class="token string">'__le__'</span><span class="token punctuation">,</span>
 <span class="token string">'__lt__'</span><span class="token punctuation">,</span>
 <span class="token string">'__ne__'</span><span class="token punctuation">,</span>
 <span class="token string">'__new__'</span><span class="token punctuation">,</span>
 <span class="token string">'__reduce__'</span><span class="token punctuation">,</span>
 <span class="token string">'__reduce_ex__'</span><span class="token punctuation">,</span>
 <span class="token string">'__repr__'</span><span class="token punctuation">,</span>
 <span class="token string">'__setattr__'</span><span class="token punctuation">,</span>
 <span class="token string">'__sizeof__'</span><span class="token punctuation">,</span>
 <span class="token string">'__str__'</span><span class="token punctuation">,</span>
 <span class="token string">'__subclasshook__'</span><span class="token punctuation">]</span>

<span class="token comment"># 实际上 dir() 等价于 'object.__dir__',我们观察上面的结果可以看出对象是有__dir__这个attribute或者说是方法的(这里并不需要细究)</span>

<span class="token comment"># 因为所有的类都会继承object(他是所有类的父类)，所以所有类都可以调用dir(),查看对象里面的属性和方法</span>

<span class="token comment"># 类似的还有 str类 下的 'str.__len__()' 等价于 len() </span>
<span class="token comment">#					'object.__getatrribute__()' 等价于 getattr()</span>
<span class="token comment">#					'object.__setattr__()' 等价于 setattr()</span>

<span class="token comment"># 比较常用的用来查看对象属性或者方法的函数</span>
<span class="token builtin">dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">getattr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">setattr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">hasattr</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 使用示例</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">class</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         self<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">9</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">def</span> <span class="token function">power</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">return</span> self<span class="token punctuation">.</span>x <span class="token operator">*</span> self<span class="token punctuation">.</span>x
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">>></span><span class="token operator">></span> obj <span class="token operator">=</span> MyObject<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">)</span> <span class="token comment"># 有属性'x'吗？</span>
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> obj<span class="token punctuation">.</span>x
<span class="token number">9</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">)</span> <span class="token comment"># 有属性'y'吗？</span>
<span class="token boolean">False</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">setattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span> <span class="token comment"># 设置一个属性'y'</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">)</span> <span class="token comment"># 有属性'y'吗？</span>
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">)</span> <span class="token comment"># 获取属性'y'</span>
<span class="token number">19</span>
<span class="token operator">>></span><span class="token operator">></span> obj<span class="token punctuation">.</span>y <span class="token comment"># 获取属性'y'</span>
<span class="token number">19</span>
<span class="token comment"># 可以传入一个default参数，如果属性不存在，就返回默认值：</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token comment"># 获取属性'z'，如果不存在，返回默认值404</span>
<span class="token number">404</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="类方法">类方法</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 类方法可以调用类变量但不能调用实例变量</span>
<span class="token comment"># 类方法用@classmethod这个装饰器实现，如下：</span>
<span class="token keyword">class</span> <span class="token class-name">H</span><span class="token punctuation">:</span>
    __val <span class="token operator">=</span> <span class="token number">3</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_val</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>__val<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
        
        
<span class="token operator">>></span><span class="token operator">></span> h <span class="token operator">=</span> H<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> H<span class="token punctuation">.</span>get_val<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
AttributeError                            Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">76</span><span class="token operator">-</span><span class="token number">0e8ff847d82b</span><span class="token operator">></span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token number">1</span> h <span class="token operator">=</span> H<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">2</span> H<span class="token punctuation">.</span>get_val<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">75</span><span class="token operator">-</span>c0204fe93832<span class="token operator">></span> <span class="token keyword">in</span> get_val<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
      <span class="token number">8</span>     <span class="token keyword">def</span> <span class="token function">get_val</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token number">9</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>__val<span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">10</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>x<span class="token punctuation">)</span>

AttributeError<span class="token punctuation">:</span> <span class="token builtin">type</span> <span class="token builtin">object</span> <span class="token string">'H'</span> has no attribute <span class="token string">'x'</span>

    
<span class="token operator">>></span><span class="token operator">></span> h<span class="token punctuation">.</span>get_val<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">3</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
AttributeError                            Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">77</span><span class="token operator">-</span><span class="token number">6b7dc73f632b</span><span class="token operator">></span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">1</span> h<span class="token punctuation">.</span>get_val<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">75</span><span class="token operator">-</span>c0204fe93832<span class="token operator">></span> <span class="token keyword">in</span> get_val<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
      <span class="token number">8</span>     <span class="token keyword">def</span> <span class="token function">get_val</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token number">9</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>__val<span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">10</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>x<span class="token punctuation">)</span>

AttributeError<span class="token punctuation">:</span> <span class="token builtin">type</span> <span class="token builtin">object</span> <span class="token string">'H'</span> has no attribute <span class="token string">'x'</span>

<span class="token comment"># 如上，在执行H.get_val()和h.get_val()后都输出了cls__val这个类私有变量的值，但在访问实例变量时抛出了AttributeError错误，说明类直接调用，如H.get_val()也可以通过实例调用，如h.get_val()，类方法可以访问类私有变量，类方法不可访问实例变量。所有实例在创造是就都共享的叫类变量,每个实例需要单独定义的变量叫实例变量</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="静态方法">静态方法</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 静态方法既不能调用实例的变量也不能调用类变量</span>
<span class="token comment"># 静态方法使用@staticmethod这个装饰器来实现，如下：</span>
<span class="token keyword">class</span> <span class="token class-name">I</span><span class="token punctuation">:</span>
    __val <span class="token operator">=</span> <span class="token number">3</span>
    val <span class="token operator">=</span> <span class="token number">4</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">print_val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>__val<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> i <span class="token operator">=</span> I<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> i<span class="token punctuation">.</span>print_val<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">123</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
NameError                                 Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">78</span><span class="token operator">-</span><span class="token number">9345bd892eed</span><span class="token operator">></span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token number">9</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>__val<span class="token punctuation">)</span>
     <span class="token number">10</span> i <span class="token operator">=</span> I<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">11</span> i<span class="token punctuation">.</span>print_val<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span>ipython<span class="token operator">-</span><span class="token builtin">input</span><span class="token operator">-</span><span class="token number">78</span><span class="token operator">-</span><span class="token number">9345bd892eed</span><span class="token operator">></span> <span class="token keyword">in</span> print_val<span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token number">6</span>     <span class="token keyword">def</span> <span class="token function">print_val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token number">7</span>         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span> <span class="token number">8</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
      <span class="token number">9</span>         <span class="token keyword">print</span><span class="token punctuation">(</span>__val<span class="token punctuation">)</span>
     <span class="token number">10</span> i <span class="token operator">=</span> I<span class="token punctuation">(</span><span class="token punctuation">)</span>

NameError<span class="token punctuation">:</span> name <span class="token string">'val'</span> <span class="token keyword">is</span> <span class="token keyword">not</span> defined
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="魔法方法">魔法方法</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	1. 对象的创建与销毁:
			__new__ 创建对象
			__init__ 初始化对象
			__del__ 当销毁对象时调用
	2. 可视化对象:
			__repr__ 对应repr(object)这个函数，返回一个可以用来表示对象的可打印字符串
			__str__ 对应str(object)这个函数，返回一个字符串对象，适合用于print输出
			__bytes__ 对应bytes(object)这个函数，返回bytes对象
	3. 比较运算符重载
			__lt__ 小于
			__le__ 小于等于
			__eq__ 等于
			__ne__ 不等于
			__gt__ 大于
			__ge__ 大于等于
	4. bool() 和 len()函数
	5. hash() 与 可hash对象
	6. 可调用对象 和 类装饰器
	7. 类装饰器
	8. 单例(基于__call__)
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="对象的创建与销毁">对象的创建与销毁</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	1. 对象的创建与销毁:
			__new__ 创建对象
			__init__ 初始化对象
			__del__ 当销毁对象时调用	
'''</span>

<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __new__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">object</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __init__'</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">mothod</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call mothod'</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __del__'</span><span class="token punctuation">)</span>
        

<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> A<span class="token punctuation">(</span><span class="token punctuation">)</span>
call __new__
call __init__
<span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">.</span>mothod<span class="token punctuation">(</span><span class="token punctuation">)</span>
call mothod
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">del</span> a
call __del__<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="可视化对象">可视化对象</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	2. 可视化对象:
			__repr__ 对应repr(object)这个函数，返回一个可以用来表示对象的可打印字符串
			__str__ 对应str(object)这个函数，返回一个字符串对象，适合用于print输出
			__bytes__ 对应bytes(object)这个函数，返回bytes对象
'''</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        
    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'call __repr__ name is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'call __str__ name is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__bytes__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'call __bytes__ name is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

    
 b <span class="token operator">=</span> B<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> b   
call __repr__ name <span class="token keyword">is</span> zhaochj
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
call __str__ name <span class="token keyword">is</span> zhaochj
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bytes</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token string">b'call __bytes__ name is zhaochj'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="比较运算符重载">比较运算符重载</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	3. 比较运算符重载
			__lt__ 小于
			__le__ 小于等于
			__eq__ 等于
			__ne__ 不等于
			__gt__ 大于
			__ge__ 大于等于
'''</span>
<span class="token triple-quoted-string string">'''
			类创建的对象里的‘属性’是可以通过运算符进行比较的
			但类本身是不能用运算符进行比较或者计算的
'''</span>
<span class="token keyword">class</span> <span class="token class-name">Person_1</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age
        
    <span class="token keyword">def</span> <span class="token function">__lt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __lt__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>age
    
    <span class="token keyword">def</span> <span class="token function">__le__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __le__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">&lt;=</span> other<span class="token punctuation">.</span>age
    
    <span class="token keyword">def</span> <span class="token function">__eq__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __eq__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">==</span> other<span class="token punctuation">.</span>age
    
    <span class="token keyword">def</span> <span class="token function">__ne__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __ne__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">!=</span> other<span class="token punctuation">.</span>age
    
    <span class="token keyword">def</span> <span class="token function">__gt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __gt__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">></span> other<span class="token punctuation">.</span>age
    
    <span class="token keyword">def</span> <span class="token function">__ge__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __ge__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>age <span class="token operator">>=</span> other<span class="token punctuation">.</span>age

    
<span class="token operator">>></span><span class="token operator">></span> p3 <span class="token operator">=</span> Person_1<span class="token punctuation">(</span><span class="token string">'30'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> p4 <span class="token operator">=</span> Person_1<span class="token punctuation">(</span><span class="token string">'20'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> p3 <span class="token operator">></span> p4
call __gt__
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> P3 <span class="token operator">==</span> P4
call __eq__
<span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="bool-和-len-函数"><code>bool()</code> 和 <code>len()</code> 函数</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	4. bool() 和 len() 函数:
			__bool__ 决定bool()函数的执行
			__len__  决定len()函数的执行
			注:如果未标注__bool__方法,则会采用object中的__bool__,并调用__len__，根据返回值决定True or False
'''</span>

<span class="token comment"># 观察bool函数的用法</span>
list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
str1 <span class="token operator">=</span> <span class="token string">''</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token comment"># 观察例1:</span>
<span class="token keyword">class</span> <span class="token class-name">Grok</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> val
        
    <span class="token keyword">def</span> <span class="token function">__bool__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __bool__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>val

<span class="token operator">>></span><span class="token operator">></span> g <span class="token operator">=</span> Grok<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
call __bool__
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> g <span class="token operator">=</span> Grok<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
call __bool__
<span class="token boolean">False</span>

<span class="token comment"># 观察例2:</span>
<span class="token keyword">class</span> <span class="token class-name">Seq</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> args
        
    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __len__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> s1 <span class="token operator">=</span> Seq<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> s2 <span class="token operator">=</span> Seq<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
call __len__
<span class="token number">3</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
call __len__
<span class="token number">0</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
call __len__
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
call __len__
<span class="token boolean">False</span>

<span class="token triple-quoted-string string">'''
	由上面两例可知, 
		1. bool函数主要是通过__bool__这个魔法方法来进行返回的,而len函数则是通过__len__这个魔法方法
		2. 我们还可知,当类内部未定义__bool__时,则自动采用object中的__bool__方法,此时会调用__len__这个魔法方法,并根据__len__方法的返回值来决定bool的返回值
'''</span>

<span class="token comment"># 例3: (定义__bool__后，调用bool()观察是否还会调用__len__)</span>
<span class="token keyword">class</span> <span class="token class-name">Seq_1</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> args
        
    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __len__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__bool__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __bool__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>

<span class="token operator">>></span><span class="token operator">></span> s3 <span class="token operator">=</span> Seq_1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span>
call __bool__
<span class="token boolean">True</span>

<span class="token comment"># 显然，符合逻辑，他并不会调用object中的__bool__方法，自然也不会调用__len__方法咯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="hash与可hash对象">hash()与可hash对象</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	5.hash()与可hash对象:
			__hash__ 控制了
'''</span>

<span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> val
        
    <span class="token keyword">def</span> <span class="token function">__hash__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">123</span>
    
    
<span class="token operator">>></span><span class="token operator">></span> h1 <span class="token operator">=</span> Hash<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hash</span><span class="token punctuation">(</span>h1<span class="token punctuation">)</span>
<span class="token number">123</span>

<span class="token triple-quoted-string string">'''
	如果不再类中定义__hash__ 在执行hash()时则会自动调用object类中的__hash__
'''</span>
<span class="token keyword">class</span> <span class="token class-name">Hash_1</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> val
 


<span class="token operator">>></span><span class="token operator">></span> h1 <span class="token operator">=</span> Hash<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hash</span><span class="token punctuation">(</span>h1<span class="token punctuation">)</span>
<span class="token number">123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="可调用对象">可调用对象</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	6. 可调用对象:
			__call__ 决定根据类实例化的对象是否可以被调用,以及返回值
'''</span>

<span class="token comment"># 在python中可以用callable函数查看一个对象是不是可调用，如下：</span>
<span class="token keyword">def</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ha ha ha'</span><span class="token punctuation">)</span>
    
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">callable</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token boolean">True</span>

<span class="token comment"># 那一个实例化的对象呢?</span>
<span class="token keyword">class</span> <span class="token class-name">Fun</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        
<span class="token operator">>></span><span class="token operator">></span> f <span class="token operator">=</span> Fun<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">callable</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token comment"># 显然该对象是不可调用的</span>


<span class="token comment"># 如何创造出一种可以调用的实例化对象呢?</span>
<span class="token keyword">class</span> <span class="token class-name">Fun_1</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'my name is &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> f <span class="token operator">=</span> Fun<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">callable</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">>></span><span class="token operator">></span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>
my name <span class="token keyword">is</span> zhaochj

<span class="token comment"># 事实上,完全可以通过 __call__魔法方法 把f()看作真正的函数,可以接收参数,也可以返回值</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="类装饰器基于__call__">类装饰器(基于<code>__call__</code>)</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	7. 类装饰器(基于可调用对象):
			__call__ 决定根据类实例化的对象是否可以被调用,以及返回值
			@ 修饰器符号:
					@class()
					def a():
						pass
					
					a() 等同于一下几步
						1. b = class()
						2. a = b(a)
						2. a() = class()(a)() 
'''</span>
<span class="token comment"># 注意:在上例中 @class() 中的()一定不能省掉了,因为其本质还是利用了,可以接受函数作为参数的‘可调用对象’作为装饰器,即由类实例化的对象b</span>

<span class="token keyword">import</span> functools
<span class="token keyword">class</span> <span class="token class-name">InjectUser</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>default_user<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>user <span class="token operator">=</span> default_user
        
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token decorator annotation punctuation">@functools<span class="token punctuation">.</span>wraps</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'user'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> kwargs<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                kwargs<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>user
            <span class="token keyword">return</span> fn<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token keyword">return</span> wrap
        
<span class="token decorator annotation punctuation">@InjectUser</span><span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">do_somthings</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
<span class="token operator">>></span><span class="token operator">></span> do_somthings<span class="token punctuation">(</span><span class="token punctuation">)</span>
zhaochj
<span class="token operator">>></span><span class="token operator">></span> do_somthings<span class="token punctuation">(</span>user<span class="token operator">=</span><span class="token string">'就这水平'</span><span class="token punctuation">)</span>
就这水平

<span class="token comment"># 这完全等价于还没有加@装饰器时的一下语句</span>
<span class="token operator">>></span><span class="token operator">></span> InjectUser<span class="token punctuation">(</span><span class="token string">'zhaochj'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>do_somthings<span class="token punctuation">(</span>user<span class="token operator">=</span><span class="token string">'就这水平'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
就这水平<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="单例基于__call__">单例(基于<code>__call__</code>)</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	8. 利用__call__实现单例:
			__call__
'''</span>

<span class="token triple-quoted-string string">'''
	所谓单例，是指一个类的实例从始至终只能被创建一次。单例的实现有多种，这里以__call__方法来实现。
		即使之后再出现去用类创建实例,其本质也是第一个创建的实例对象
'''</span>

<span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">:</span>
    __instance <span class="token operator">=</span> <span class="token boolean">None</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>cls <span class="token operator">=</span> cls
        
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__instance <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__instance <span class="token operator">=</span> self<span class="token punctuation">.</span>cls<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__instance

<span class="token decorator annotation punctuation">@Single</span>
<span class="token keyword">class</span> <span class="token class-name">Grok1</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token operator">>></span><span class="token operator">></span> grok1 <span class="token operator">=</span> Grok1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>grok1<span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> grok2 <span class="token operator">=</span> Grok1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>grok2<span class="token punctuation">)</span>


<span class="token triple-quoted-string string">'''
	我们来仔细分析一下程序顺序:
			1. 执行 grok1 = Grok1() 语句:
					1. Grok1被修饰器Single修饰:
						Grok1' = Single(Grok1):
						1. 将Single类实例化为一个的对象(我们将其称之为A),self就是对象A
						2. cls 接收传入的参数，即Grok1这个类
						3. 使Grok1这个对象的‘cls’属性 指向 Grok1这个类
						4. 将 Grok1'(为了区分它与之Grok1类) 指向实例化的Single类对象
					2. Grok1():
						1. 因为Grok1'本质上已经是实例化的Single类对象,所以在调用Grok1'时本质上是在调用Signal类里面定义好的__call__()方法
						2. 执行__call__(): (因为Grok1'()没有参数,所以__call__也没有参数)
								1. 判断是否创建过实例,显示没有进入if执行语句:
										1. Grok1'.__instance = Grok1'.cls() = Grok1()
										2. 即,将Grok1()类实例化出一个对象Grok1'.__instance
								2. 将Grok1'.__instance,即一个Grok1类的实例化对象的返回
					3. 将grok1 指向这个返回的Grok1类的实例化对象
					
			2. 执行 grok2 = Grok1() 语句:
					1. 因为Grok1已经经过了执行grok1 = Grok1()时,被修饰器Single修饰的那一步，(修饰过程只有执行了一次就不会再执行了)，所以本质上Grok1还是上次创造出来的Grok1',即一个实例化的Single类对象而已。此时直接进入第2步
					2. Grok1():
						在这里,分析基本与第一次执行时一直,但是不同点就在于，此时Grok1'.__instance不为空而是指向一个Grok1类的实例化对象,可以这么说,其实就是grok1了,所以他不会再执行if语句里面的实例化过程了,而是直接返回这个实例化对象,即之前已经创建的grok1
					3. 将grok2 指向这个返回的Grok1类的实例化对象, 即grok1
'''</span>			<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="with语句"><code>with</code>语句</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
		9. with 语句与__enter__,__exit__方法
'''</span>


<span class="token triple-quoted-string string">'''
	有一些任务，可能事先需要设置，事后做清理工作。对于这种场景，Python的with语句提供了一种非常方便的处理方式。一个很好的例子是文件处理，你需要获取一个文件句柄，从文件中读取数据，然后关闭文件句柄。
	如果不使用with语句，代码是这样的：
'''</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"/tmp/foo.txt"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token string">'这里有两个问题。一是可能忘记关闭文件句柄；二是文件读取数据发生异常，没有进行任何处理。下面是处理异常的加强版本：'</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"/tmp/foo.txt"</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token string">'虽然这段代码运行良好，但是太冗长了。这时候就是with一展身手的时候了。除了有更优雅的语法，with还可以很好的处理上下文环境产生的异常。下面是with版本的代码：'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"/tmp/foo.txt"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 那with语法是怎么实现的呢？下边来看一个类：    </span>
<span class="token keyword">class</span> <span class="token class-name">Resource</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"call __init__"</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">__enter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"call __enter__"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"self object at &#123;0&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self
    
    <span class="token keyword">def</span> <span class="token function">__exit__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"call __exit__"</span><span class="token punctuation">)</span>
        
        
<span class="token comment"># 创造个实例并运行试试?</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">with</span> Resource<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> res<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"res object at &#123;0&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
call __init__
call __enter__
self <span class="token builtin">object</span> at <span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>Resource <span class="token builtin">object</span> at <span class="token number">0x7f5db448a6a0</span><span class="token operator">></span>
res <span class="token builtin">object</span> at <span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>Resource <span class="token builtin">object</span> at <span class="token number">0x7f5db448a6a0</span><span class="token operator">></span>
call __exit__

<span class="token comment"># 这上边这个例子可知，只要一个类实现了__enter__和__exit__方法，那这个类就可以使用with语句。</span>


<span class="token comment"># with语句的调用流程大致如下：</span>
<span class="token number">1</span><span class="token punctuation">.</span> python解释器执行到<span class="token keyword">with</span> Resource<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> res<span class="token punctuation">:</span>语句时，其实是首先实例化了Resource类给对象res，接着执行了__enter__函数<span class="token punctuation">,</span>打印了前三行
<span class="token number">2</span><span class="token punctuation">.</span> 执行<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"res object at &#123;0&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>语句，这里的res是指向Resource类实例化对象，所以与self指向的对象相同，打印第四行
<span class="token number">3</span><span class="token punctuation">.</span> 再执行__exit__函数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="描述器">描述器</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	一个类实现了__get__、__set__、__delete__三个方法，这个类就叫描述器
	以我现在的感觉来看,装饰器增强函数功能而存在的:(传入的参数是类或者函数)
		1. 普通装饰器,函数C接收的是函数A,返回的是函数B,通过函数B增强函数A的功能
		2. 类装饰器,类C接收的是函数A,返回的是可调用对象B,通过类的属性和方法来增强A的功能
				或者接受的是类A,返回的是可调用对象B,B可以实现实例化的功能,例如:单例
	而描述器则是为了限制类的属性而存在的:(传入的参数是属性名)
		1. 描述其,类C接受的是变量名字,返回对象,通过__get__、__set__、__delete__三个方法使得这个看起来这个对象表现和属性变量无异
	直接来看一个描述器的实现，如下：
'''</span>

<span class="token keyword">class</span> <span class="token class-name">Number</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        
    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __get__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
    
    <span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __set__'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">'execepted int or float'</span><span class="token punctuation">)</span>
            
    <span class="token keyword">def</span> <span class="token function">__delete__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">del</span> instance<span class="token punctuation">.</span>__dic
        
        
<span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
    y <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
<span class="token triple-quoted-string string">'''
	这样就定义了一个描述器Number类，这个类的作用是描述实例化Point类时x和y变量的类型必须为整型或浮点型，如果不满足这两种类型中的一个，那抛出TypeError的异常。为了验证代码的调用关系，有意在Number类中加了一些print语句，在实例代码中应该把这语句去除。现在来实际实例化Point类试试：
'''</span>

<span class="token comment"># 给类里面的对象赋值</span>
<span class="token operator">>></span><span class="token operator">></span> p1 <span class="token operator">=</span> Point<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
call __set__
call __set__

<span class="token comment"># 当执行p1 = Point(2,8)时发生了什么呢？</span>
<span class="token comment"># 1.当python解释器解析到</span>
<span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
    y <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
<span class="token comment"># 代码块时，解释器会创建一个Point类对象，此对象中有x类变量，且此变量指向Number类的一个实例，有y类变量，且此变量指向Number类的另一个实例；解释器还会创建一个__init__函数，此函数接收两个参数。</span>


<span class="token comment"># 2.当解释器执行到p1 = Point(2,8)时，Point类中的__init__构建函数被执行，执行以下两代码</span>
self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
<span class="token comment"># 解释器先执行self.x = x代码，这里的self.x是一个变量对象，等号后边的x是指向类变量x = Number('x')中的Number类实例，这时解释器会执行Number类中的__set__函数，把p1实例传递给instance这个形参，把2传递给value这个形参，执行此函数体的代码</span>
<span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __set__'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">'execepted int or float'</span><span class="token punctuation">)</span>
<span class="token comment"># 首先打印出call __set__，再执行if语句，为True时把p1实例中__dict__这个特殊方法中key为x的值指向2；如果if语句的判断结果为False，那抛出异常。</span>

<span class="token comment"># 接着解释器往下执行代码，开始执行构建函数中的self.y = y语句，这个过程与执行self.x = x语句一样。这样就完成了p1 = Point(2,8)这个语句的执行，其实质就是会去执行Number类的__set__函数</span>
<span class="token operator">>></span><span class="token operator">></span> P1<span class="token punctuation">.</span>x
call __get__
<span class="token number">2</span>


<span class="token comment"># 当执行上边的p1.x时发生了什么？</span>
<span class="token comment"># 执行p1.x是去调用Point类的实例变量x，从上边的分析可知，这个实例变量是指向Number('x')这个实例，这时解释器会执行Number类的__get__方法，会把p1这个实例名作为变量传递给instance这个形参，把p1的类名作为变量传递给cls，代码如下：</span>
<span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call __get__'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
<span class="token comment"># 先打印出call __get__，然后取出p1实例中__dict__中key为x的值返回，这样就得到执行p1 = Point(2,8)语句时2这个数字。</span>
<span class="token comment"># 总结起来，访问一个使用了描述器的类的实例属性时，其实质是访问了描述器的__get__函数。</span>
<span class="token comment"># 其实访问p1.x和访问Point.x.__get__(p1,Point)的过程是一样的。</span>


<span class="token operator">>></span><span class="token operator">></span> P1<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">10</span>
call __set__

这和实例化Point类时<span class="token punctuation">,</span>初始化赋值给x<span class="token punctuation">,</span>的过程是一样的<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码改进(可以控制判断传入不同的类型)</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">TypeCheck</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">,</span>expected_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>expected_type <span class="token operator">=</span> expected_type
        
    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> instance <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
        <span class="token keyword">return</span> self
    
    <span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>self<span class="token punctuation">.</span>expected_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">'expected type &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>expected_type<span class="token punctuation">)</span><span class="token punctuation">)</span>
        instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value
        
    <span class="token keyword">def</span> <span class="token function">__delete__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>instance<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">del</span> instance<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span>self<span class="token punctuation">.</span>name<span class="token punctuation">]</span>

        
<span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    y <span class="token operator">=</span> Number<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y       <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="补充">补充</h4>
<h5 id="super方法">super()方法</h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># super 的一个最常见用法可以说是在子类中调用父类的初始化方法了。</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, I am %s.'</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>Dog<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>greet<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#调用父类Animal的greet方法</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'WangWang...'</span><span class="token punctuation">)</span>


d<span class="token operator">=</span>Dog<span class="token punctuation">(</span><span class="token string">"xiaohuang"</span><span class="token punctuation">)</span>

d<span class="token punctuation">.</span>greet<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果如下:</p>
<pre class="line-numbers language-none"><code class="language-none">Hello, I am xiaohuang.
WangWang...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="面向对象高级编程">面向对象高级编程</h3>
<h4 id="动态绑定属性">动态绑定属性</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

s1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>
s2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># 给实例化的对象进行属性绑定:</span>
s1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Michael'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token string">'Michael'</span>
<span class="token comment"># 但是其他实例化的对象并不会改变:</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
Error


<span class="token comment"># 若想要全部对象都可以使用该属性,则需要对类进行动态的属性绑定</span>
Student<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Michael'</span>
<span class="token triple-quoted-string string">'''
	这样所有的对象的name属性就都是Michael了，值得注意的是这与变量的查询机制有关，首先是对象里面是否定义了，如果没有则查询到本类，再是父类，超父类
'''</span>
<span class="token comment"># 另外方法也可以看做是一种属性</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="对动态绑定属性的限制">对动态绑定属性的限制</h4>
<h5 id="slots__"><code>__slots__</code></h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''
	但是实际情况下,我们并不希望用户去随意的绑定属性，所以Python引入了__slots__属性对这一行为进行限制
'''</span>


<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    __slots__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment"># 用tuple定义允许绑定的属性名称</span>
    
    
<span class="token operator">>></span><span class="token operator">></span> s <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 创建新的实例</span>
<span class="token operator">>></span><span class="token operator">></span> s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Michael'</span> <span class="token comment"># 绑定属性'name'</span>
<span class="token operator">>></span><span class="token operator">></span> s<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span> <span class="token comment"># 绑定属性'age'</span>
<span class="token operator">>></span><span class="token operator">></span> s<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">99</span> <span class="token comment"># 绑定属性'score'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'Student'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'score'</span>
    
    
<span class="token comment"># 注意:__slots__定义的属性仅对当前类实例起作用，对继承的子类是不起作用的:</span>
<span class="token comment"># 所以如果需要限制绑定属性,则在定义子类的时候也要引入__slots__,此时子类中的允许绑定的属性就是自身的__slots__加上父类的__slots__</span>
<span class="token comment"># 如果只是单纯的想继承父类定义的__slots__,则只需要在定义子类时加上一行 __slots__ = ()即可</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="property的实现与作用"><span class="citation" data-cites="property的实现与作用">@property的实现与作用</span></h5>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 我们直接来看property源码吧</span>
<span class="token keyword">class</span> <span class="token class-name">Property</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">"Emulate PyProperty_Type() in Objects/descrobject.c"</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fget<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fset<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fdel<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> doc<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>fget <span class="token operator">=</span> fget
        self<span class="token punctuation">.</span>fset <span class="token operator">=</span> fset
        self<span class="token punctuation">.</span>fdel <span class="token operator">=</span> fdel
        self<span class="token punctuation">.</span>__doc__ <span class="token operator">=</span> doc

    <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> objtype<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> obj <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fget <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">,</span> <span class="token string">"unreadable attribute"</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>fget<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__set__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fset <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">,</span> <span class="token string">"can't set attribute"</span>
        self<span class="token punctuation">.</span>fset<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__delete__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>fdel <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AttributeError<span class="token punctuation">,</span> <span class="token string">"can't delete attribute"</span>
        self<span class="token punctuation">.</span>fdel<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fget<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>fget<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fset<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fset<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>fget<span class="token punctuation">,</span> fset<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">deleter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fdel<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>fget<span class="token punctuation">,</span> self<span class="token punctuation">.</span>fset<span class="token punctuation">,</span> fdel<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>

    
<span class="token comment"># 可以看出Property就是一个‘描述器’,其作用是让返回的对象表现的像是他传递进来之前的样子,可以直接赋值,可以直接调用,还可以删除,除此之外,他还可以接收函数作为参数,并增强函数的功能,显然他也是一个‘装饰器’</span>

<span class="token comment"># 我们来看一个使用 @property 的实例:</span>
<span class="token keyword">class</span> <span class="token class-name">Spam</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__val <span class="token operator">=</span> val

    <span class="token decorator annotation punctuation">@Property</span>
    <span class="token keyword">def</span> <span class="token function">val</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__val
    
    <span class="token decorator annotation punctuation">@val<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">set_val</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__val <span class="token operator">=</span> value


<span class="token comment"># 1. 首先我们实例化这个Student,分析一下执行过程</span>
<span class="token operator">>></span><span class="token operator">></span> s1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
	执行过程分析:
		1. 执行了__init__语句，将传入的参数的值传递给了实例变量self.__val,且该变量不可以直接通过s1.__val访问
		2. val被装饰器Property给装饰了,具体过程就不分析了,总之是返回了一个名为val的Property类对象,并将val取代之。这一步骤的主要意义在意将'self.val'与'val(self)'等价起来
		3. set_val被装饰器val.setter给装饰了,将val这个property对象的fset方法设置为Spam类中的set_val方法,因为__set__方法的存在,使得可以直接对val进行赋值,这个值将作为返回的执行函数参数的value值, self.fset(obj, value), 等价于 set_val(self,value)。这一步最关键的意义在于让'self.val=value'与set_val(self,value)等价起来
		4. 将实例化好的对象传递给s1
		此时 s1.val 等价于 Property.__get__.(self, s1) 等价于 s1.val(self) 等价于 self.__val
			s1.val = 10 等价于 Property.__set_.(self, s1, 10) 等价于 s1.set_val(self, 10) 等价于 self.__val = 10
'''</span>

<span class="token triple-quoted-string string">'''
	为何要大费周章搞这些?直接把__val设置为公有属性不就好了吗,何必这么麻烦?
		1.在val方法中动手脚可以很轻松的将传入的值联系上其他与之相关的变量,即一个属性变动后,其他与之相关的属性可以通过表达式进行修改,从而达到自动化更新所有属性的效果
		2.通过对是否调用@val.setter可以控制是否可以直接用赋值符号进行修改,即控制变量是'只读'还是'可读写'
		3.通过在val方法中的操作可以对传入的值进行简单的检查,从而判断是否需要传递给属性,还是说输入的参数有问题
		4.Property别人都跟你写好了,直接当装饰器和描述器用不就好了吗,何必去纠结麻不麻烦?比你自己实现这些功能麻烦?Property的主要作用感觉就是
				1. 允许直接调用对象,使得这个对象的调用会执行某一个特定函数
				2. 重载了'='为一个函数,左边为对象,右边为函数的参数
				3. 允许直接用del(我们一般不会设置这个)
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="io编程">IO编程</h3>
<h4 id="文件读写">文件读写</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 读文件</span>
<span class="token comment"># 要以读文件的模式打开一个文件对象，使用Python内置的open()函数，传入文件名和标示符：</span>
<span class="token operator">>></span><span class="token operator">></span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/Users/michael/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>

<span class="token comment"># 如果文件打开成功，接下来，调用read()方法可以一次读取文件的全部内容，Python把内容读到内存，用一个str对象表示：</span>
<span class="token operator">>></span><span class="token operator">></span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Hello, world!'</span>

<span class="token comment"># 最后一步是调用close()方法关闭文件。文件使用完毕后必须关闭，因为文件对象会占用操作系统的资源，并且操作系统同一时间能打开的文件数量也是有限的:</span>
<span class="token operator">>></span><span class="token operator">></span> f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 由于文件读写时都有可能产生IOError，一旦出错，后面的f.close()就不会调用。所以，为了保证无论是否出错都能正确地关闭文件，我们可以使用try ... finally来实现:</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    	f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   	<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	<span class="token keyword">finally</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">if</span> f<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        	f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># 但是每次都这么写实在太繁琐，所以，Python引入了with语句来自动帮我们调用close()方法:</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 这和前面的<span class="token keyword">try</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">finally</span>是一样的，但是代码更佳简洁，并且不必调用f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>方法。

<span class="token comment"># 调用read()会一次性读取文件的全部内容，如果文件有10G，内存就爆了，所以，要保险起见，可以反复调用read(size)方法，每次最多读取size个字节的内容。另外，调用readline()可以每次读取一行内容，调用readlines()一次读取所有内容并按行返回list。因此，要根据需要决定怎么调用。</span>

<span class="token comment"># 如果文件很小，read()一次性读取最方便；如果不能确定文件大小，反复调用read(size)比较保险；如果是配置文件，调用readlines()最方便</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 把末尾的'\n'删掉</span>
    
    
<span class="token comment"># file-like Object</span>
<span class="token comment"># 像open()函数返回的这种有个read()方法的对象，在Python中统称为file-like Object。除了file外，还可以是内存的字节流，网络流，自定义流等等。file-like Object不要求从特定类继承，只要写个read()方法就行。</span>
<span class="token comment"># StringIO就是在内存中创建的file-like Object，常用作临时缓冲。</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Coldeye
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html" title="Python(二)Python中级语法">https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Tech/Java/java_grammar_primary.html" rel="prev" title="Java(一)Java初级语法">
                  <i class="fa fa-chevron-left"></i> Java(一)Java初级语法
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Tech/Math/Modeling/MCM_2021.html" rel="next" title="美赛建模2021">
                  美赛建模2021 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Coldeye</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Symbols count total">143k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">2:10</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  
<script src="/js/local-search.js"></script>



<script data-pjax>
if (document.querySelectorAll('.pdf-container').length) {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/pdfobject@2.2.4/pdfobject.min.js', () => {
    document.querySelectorAll('.pdf-container').forEach(element => {
      PDFObject.embed(element.dataset.target, element, {
        pdfOpenParams: {
          navpanes : 0,
          toolbar  : 0,
          statusbar: 0,
          pagemode : 'thumbs',
          view     : 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height   : element.dataset.height
      });
    });
  }, window.PDFObject);
}
</script>


  <script>
    NProgress.configure({
      showSpinner: true
    });
    NProgress.start();
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive') {
        NProgress.inc(0.8);
      }
      if (document.readyState === 'complete') {
        NProgress.done();
      }
    });
    document.addEventListener('pjax:send', () => {
      NProgress.start();
    });
    document.addEventListener('pjax:success', () => {
      NProgress.done();
    });
  </script>

  



    <div class="pjax">

  

  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.1.0/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink.listen({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://coldeye2020.monster/Tech/Python/python_grammar_intermediate.html',]
      });
      });
  </script>

<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({"enable":true,"appId":"09tInux3xJRlMs2A008PDeuP-MdYXbMMI","appKey":"PIFdCFbjTxC8EPP53JdDhrKO","serverURLs":null,"placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":true,"comment_count":true,"recordIP":false,"enableQQ":false,"requiredFields":[]}, {
      el: '#valine-comments',
      path: "/Tech/Python/python_grammar_intermediate.html",
      serverURLs: "https://09tinux3.api.lncldglobal.com"
    }));
  }, window.Valine);
});
</script>

    </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":300,"height":450,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
